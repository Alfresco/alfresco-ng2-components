/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require("@angular/core");
var rendering_queue_services_1 = require("../services/rendering-queue.services");
var PdfViewerComponent = (function () {
    function PdfViewerComponent(renderingQueueServices) {
        this.renderingQueueServices = renderingQueueServices;
        this.showToolbar = true;
        this.currentScaleMode = 'auto';
        this.MAX_AUTO_SCALE = 1.25;
        this.DEFAULT_SCALE_DELTA = 1.1;
        this.MIN_SCALE = 0.25;
        this.MAX_SCALE = 10.0;
    }
    PdfViewerComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if (!this.urlFile) {
            throw new Error('Attribute urlFile is required');
        }
        if (this.urlFile) {
            return new Promise(function (resolve, reject) {
                var loadingTask = _this.getPDFJS().getDocument(_this.urlFile);
                loadingTask.onProgress = function (progressData) {
                    var level = progressData.loaded / progressData.total;
                    _this.laodingPercent = Math.round(level * 100);
                };
                loadingTask.then(function (pdfDocument) {
                    _this.currentPdfDocument = pdfDocument;
                    _this.totalPages = pdfDocument.numPages;
                    _this.page = 1;
                    _this.displayPage = 1;
                    _this.initPDFViewer(_this.currentPdfDocument);
                    _this.currentPdfDocument.getPage(1).then(function () {
                        _this.scalePage('auto');
                        resolve();
                    }, function (error) {
                        reject(error);
                    });
                }, function (error) {
                    reject(error);
                });
            });
        }
    };
    PdfViewerComponent.prototype.getPDFJS = function () {
        return PDFJS;
    };
    PdfViewerComponent.prototype.initPDFViewer = function (pdfDocument) {
        var _this = this;
        PDFJS.verbosity = 1;
        PDFJS.disableWorker = false;
        var documentContainer = document.getElementById('viewer-pdf-container');
        var viewer = document.getElementById('viewer-viewerPdf');
        window.document.addEventListener('scroll', function (event) {
            _this.watchScroll(event.target);
        }, true);
        this.pdfViewer = new PDFJS.PDFViewer({
            container: documentContainer,
            viewer: viewer,
            renderingQueue: this.renderingQueueServices
        });
        this.renderingQueueServices.setViewer(this.pdfViewer);
        this.pdfViewer.setDocument(pdfDocument);
    };
    PdfViewerComponent.prototype.scalePage = function (scaleMode) {
        this.currentScaleMode = scaleMode;
        if (this.pdfViewer) {
            var viewerContainer = document.getElementById('viewer-main-container');
            var documentContainer = document.getElementById('viewer-pdf-container');
            var widthContainer = void 0;
            var heigthContainer = void 0;
            if (viewerContainer && viewerContainer.clientWidth <= documentContainer.clientWidth) {
                widthContainer = viewerContainer.clientWidth;
                heigthContainer = viewerContainer.clientHeight;
            }
            else {
                widthContainer = documentContainer.clientWidth;
                heigthContainer = documentContainer.clientHeight;
            }
            var currentPage = this.pdfViewer._pages[this.pdfViewer._currentPageNumber];
            var padding = 20;
            var pageWidthScale = (widthContainer - padding) / currentPage.width * currentPage.scale;
            var pageHeightScale = (heigthContainer - padding) / currentPage.width * currentPage.scale;
            var scale = void 0;
            switch (this.currentScaleMode) {
                case 'page-actual':
                    scale = 1;
                    break;
                case 'page-width':
                    scale = pageWidthScale;
                    break;
                case 'page-height':
                    scale = pageHeightScale;
                    break;
                case 'page-fit':
                    scale = Math.min(pageWidthScale, pageHeightScale);
                    break;
                case 'auto':
                    var horizontalScale = void 0;
                    if (this.isLandscape) {
                        horizontalScale = Math.min(pageHeightScale, pageWidthScale);
                    }
                    else {
                        horizontalScale = pageWidthScale;
                    }
                    scale = Math.min(this.MAX_AUTO_SCALE, horizontalScale);
                    break;
                default:
                    console.error('pdfViewSetScale: \'' + scaleMode + '\' is an unknown zoom value.');
                    return;
            }
            this.setScaleUpdatePages(scale);
        }
    };
    PdfViewerComponent.prototype.setScaleUpdatePages = function (newScale) {
        if (!this.isSameScale(this.currentScale, newScale)) {
            this.currentScale = newScale;
            this.pdfViewer._pages.forEach(function (currentPage) {
                currentPage.update(newScale);
            });
            this.pdfViewer.update();
        }
    };
    PdfViewerComponent.prototype.isSameScale = function (oldScale, newScale) {
        return (newScale === oldScale);
    };
    PdfViewerComponent.prototype.isLandscape = function (width, height) {
        return (width > height);
    };
    PdfViewerComponent.prototype.onResize = function () {
        this.scalePage(this.currentScaleMode);
    };
    PdfViewerComponent.prototype.pageFit = function () {
        if (this.currentScaleMode !== 'page-fit') {
            this.scalePage('page-fit');
        }
        else {
            this.scalePage('auto');
        }
    };
    PdfViewerComponent.prototype.zoomIn = function (ticks) {
        var newScale = this.currentScale;
        do {
            newScale = (newScale * this.DEFAULT_SCALE_DELTA).toFixed(2);
            newScale = Math.ceil(newScale * 10) / 10;
            newScale = Math.min(this.MAX_SCALE, newScale);
        } while (--ticks > 0 && newScale < this.MAX_SCALE);
        this.currentScaleMode = 'auto';
        this.setScaleUpdatePages(newScale);
    };
    PdfViewerComponent.prototype.zoomOut = function (ticks) {
        var newScale = this.currentScale;
        do {
            newScale = (newScale / this.DEFAULT_SCALE_DELTA).toFixed(2);
            newScale = Math.floor(newScale * 10) / 10;
            newScale = Math.max(this.MIN_SCALE, newScale);
        } while (--ticks > 0 && newScale > this.MIN_SCALE);
        this.currentScaleMode = 'auto';
        this.setScaleUpdatePages(newScale);
    };
    PdfViewerComponent.prototype.previousPage = function () {
        if (this.pdfViewer && this.page > 1) {
            this.page--;
            this.displayPage = this.page;
            this.pdfViewer.currentPageNumber = this.page;
        }
    };
    PdfViewerComponent.prototype.nextPage = function () {
        if (this.pdfViewer && this.page < this.totalPages) {
            this.page++;
            this.displayPage = this.page;
            this.pdfViewer.currentPageNumber = this.page;
        }
    };
    PdfViewerComponent.prototype.inputPage = function (page) {
        var pageInput = parseInt(page, 10);
        if (!isNaN(pageInput) && pageInput > 0 && pageInput <= this.totalPages) {
            this.page = pageInput;
            this.displayPage = this.page;
            this.pdfViewer.currentPageNumber = this.page;
        }
        else {
            this.displayPage = this.page;
        }
    };
    PdfViewerComponent.prototype.watchScroll = function (target) {
        var outputPage = this.getVisibleElement(target);
        if (outputPage) {
            this.page = outputPage.id;
            this.displayPage = this.page;
        }
    };
    PdfViewerComponent.prototype.getVisibleElement = function (target) {
        var _this = this;
        return this.pdfViewer._pages.find(function (page) {
            return _this.isOnScreen(page, target);
        });
    };
    PdfViewerComponent.prototype.isOnScreen = function (page, target) {
        var viewport = {};
        viewport.top = target.scrollTop;
        viewport.bottom = viewport.top + target.scrollHeight;
        var bounds = {};
        bounds.top = page.div.offsetTop;
        bounds.bottom = bounds.top + page.viewport.height;
        return ((bounds.top <= viewport.bottom) && (bounds.bottom >= viewport.top));
    };
    ;
    PdfViewerComponent.prototype.handleKeyboardEvent = function (event) {
        var key = event.keyCode;
        if (key === 39) {
            this.nextPage();
        }
        else if (key === 37) {
            this.previousPage();
        }
    };
    return PdfViewerComponent;
}());
__decorate([
    core_1.Input(),
    __metadata("design:type", String)
], PdfViewerComponent.prototype, "urlFile", void 0);
__decorate([
    core_1.Input(),
    __metadata("design:type", String)
], PdfViewerComponent.prototype, "nameFile", void 0);
__decorate([
    core_1.Input(),
    __metadata("design:type", Boolean)
], PdfViewerComponent.prototype, "showToolbar", void 0);
__decorate([
    core_1.HostListener('document:keydown', ['$event']),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [KeyboardEvent]),
    __metadata("design:returntype", void 0)
], PdfViewerComponent.prototype, "handleKeyboardEvent", null);
PdfViewerComponent = __decorate([
    core_1.Component({
        moduleId: module.id,
        selector: 'pdf-viewer',
        template: "<!-- Start Pdf Canvas --> <div id=\"viewer-pdf-container\" class=\"viewer-pdf-container\" (keypress)=eventHandler() (window:resize)=\"onResize($event)\">     <div id=\"viewer-viewerPdf\" class=\"pdfViewer\">         <div id=\"loader-container\" class=\"loader-container\">             <div class=\"loader-item\">                 <div id=\"loader-spin\" class=\"mdl-progress mdl-js-progress mdl-progress__indeterminate\"></div>                 <div id=\"loader-text\" class=\"loader-text\">Loading <span>{{nameFile}}</span> {{laodingPercent}}%</div>             </div >         </div>     </div> </div> <!-- End Pdf Canvas -->   <!-- Pagination toolbar start --> <div *ngIf=\"showToolbar\" id=\"viewer-toolbar-pagination\" class=\"viewer-toolbar-pagination mdl-cell--hide-tablet mdl-cell--hide-phone\">     <div id=\"viewer-previous-page-button\" class=\"button-page left\" (click)=\"previousPage()\">         <i class=\"icon material-icons\">keyboard_arrow_left</i>     </div>      <div class=\"viewer-page-counter left\" >         <input id=\"viewer-pagenumber-input\"  #page                (keyup.enter)=\"inputPage(page.value)\" class=\"viewer-pagenumber-input left\" type=\"text\" pattern=\"-?[0-9]*(\\.[0-9]+)?\" value=\"{{displayPage}}\">         <div id=\"viewer-total-pages\"  class=\"left viewer-total-pages\">/ {{totalPages}}</div>     </div>      <div id=\"viewer-next-page-button\" class=\"button-page left\"  (click)=\"nextPage()\" >         <i class=\"icon material-icons\" >keyboard_arrow_right</i>     </div> </div> <!-- Pagination toolbar end -->  <!-- Command toolbar start --> <div *ngIf=\"showToolbar\"  id=\"viewer-toolbar-command\" class=\"viewer-toolbar-command\">     <div id=\"viewer-scale-page-button\" class=\"button-page left\" (click)=\"pageFit()\">         <i class=\"icon material-icons\">zoom_out_map</i>     </div>     <div id=\"viewer-zoom-in-button\" class=\"button-page left\" (click)=\"zoomIn()\">         <i class=\"icon material-icons\">zoom_in</i>     </div>     <div id=\"viewer-zoom-out-button\" class=\"button-page left\" (click)=\"zoomOut()\">         <i class=\"icon material-icons\">zoom_out</i>     </div> </div> <!-- Command toolbar end -->",
        styles: [".loader-container {     display: -webkit-box;      /* OLD - iOS 6-, Safari 3.1-6 */     display: -moz-box;         /* OLD - Firefox 19- (buggy but mostly works) */     display: -webkit-flex;     /* NEW - Chrome */     display: flex;             /* NEW, Spec - Opera 12.1, Firefox 20+ */     -webkit-box-flex-direction: row;     -moz-box-flex-direction: row;     -webkit-flex-direction: row;     flex-direction: row;     height:100%; }  .loader-item {     margin: auto;     max-height:100px;     max-width:300px; }  .loader-text{     white-space: nowrap;     text-align: center;     position: relative;     color : #fff; }  .left {     float: left; }  .viewer-toolbar-pagination{     padding-top: 4px;     top: 80px;     right:35px;     width:auto;     position:absolute;     border-radius: 10px;     background: #3E3E3E;     color: white; }  .viewer-toolbar-command{     height: 30px;     padding-top: 4px;     top: 80px;     left:35px;     width:auto;     position:absolute;     border-radius: 10px;     background: #3E3E3E;     color: white; }  .viewer-pagenumber-input {     border: none;     display: block;     font-size: 16px;     padding: 4px 0;     background: 0 0;     text-align: right;     color: inherit;     width: 33px;     margin-right: 4px;     height: 20px; }  .viewer-total-pages {     border: medium none;     display: flex;     font-size: 16px;     padding: 4px 0px;     background: transparent none repeat scroll 0px 0px;     text-align: right;     color: inherit;     margin-right: 4px;     height: 20px;     align-items: center;     justify-content: center; }  .viewer-page-counter {     margin-right: 20px; }  .button-page {     margin-right: 4px;     height: 24px;     width: 24px;     margin-left: 4px;     cursor: pointer; }  .button-page:hover {     cursor: pointer;     background: grey;     border-radius: 24px; } :host >>> .textLayer {     position: absolute;     left: 0;     top: 0;     right: 0;     bottom: 0;     overflow: hidden;     opacity: 0.2;     line-height: 1.0; }  :host >>> .textLayer > div {     color: transparent;     position: absolute;     white-space: pre;     cursor: text;     -webkit-transform-origin: 0% 0%;     -moz-transform-origin: 0% 0%;     -o-transform-origin: 0% 0%;     -ms-transform-origin: 0% 0%;     transform-origin: 0% 0%; }  :host >>> .textLayer .highlight {     margin: -1px;     padding: 1px;      background-color: rgb(180, 0, 170);     border-radius: 4px; }  :host >>> .textLayer .highlight.begin {     border-radius: 4px 0px 0px 4px; }  :host >>> .textLayer .highlight.end {     border-radius: 0px 4px 4px 0px; }  :host >>> .textLayer .highlight.middle {     border-radius: 0px; }  :host >>> .textLayer .highlight.selected {     background-color: rgb(0, 100, 0); }  :host >>> .textLayer ::selection { background: rgb(0,0,255); } :host >>> .textLayer ::-moz-selection { background: rgb(0,0,255); }  :host >>> .textLayer .endOfContent {     display: block;     position: absolute;     left: 0px;     top: 100%;     right: 0px;     bottom: 0px;     z-index: -1;     cursor: default;     -webkit-user-select: none;     -ms-user-select: none;     -moz-user-select: none; }  :host >>> .textLayer .endOfContent.active {     top: 0px; }   :host >>> .annotationLayer section {     position: absolute; }  :host >>> .annotationLayer .linkAnnotation > a {     position: absolute;     font-size: 1em;     top: 0;     left: 0;     width: 100%;     height: 100%; }  :host >>> .annotationLayer .linkAnnotation > a /* -ms-a */  {     background: url(\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\") 0 0 repeat; }  :host >>> .annotationLayer .linkAnnotation > a:hover {     opacity: 0.2;     background: #ff0;     box-shadow: 0px 2px 10px #ff0; }  :host >>> .annotationLayer .textAnnotation img {     position: absolute;     cursor: pointer; }  :host >>> .annotationLayer .popupWrapper {     position: absolute;     width: 20em; }  :host >>> .annotationLayer .popup {     position: absolute;     z-index: 200;     max-width: 20em;     background-color: #FFFF99;     box-shadow: 0px 2px 5px #333;     border-radius: 2px;     padding: 0.6em;     margin-left: 5px;     cursor: pointer;     word-wrap: break-word; }  :host >>> .annotationLayer .popup h1 {     font-size: 1em;     border-bottom: 1px solid #000000;     padding-bottom: 0.2em; }  :host >>> .annotationLayer .popup p {     padding-top: 0.2em; }  :host >>> .annotationLayer .highlightAnnotation, .annotationLayer .underlineAnnotation, .annotationLayer .squigglyAnnotation, .annotationLayer .strikeoutAnnotation, .annotationLayer .fileAttachmentAnnotation {     cursor: pointer; }  :host >>> .pdfViewer .canvasWrapper {     overflow: hidden; }  :host >>> .pdfViewer .page {     direction: ltr;     width: 816px;     height: 1056px;     margin: 1px auto -8px auto;     position: relative;     overflow: visible;     border: 9px solid transparent;     background-clip: content-box;     background-color: white; }  :host >>> .pdfViewer.removePageBorders .page {     margin: 0px auto 10px auto;     border: none; }  :host >>> .pdfViewer .page canvas {     margin: 0;     display: block; }  :host >>> .pdfViewer .page .loadingIcon {     position: absolute;     display: block;     left: 0;     top: 0;     right: 0;     bottom: 0; }  :host >>> .loadingIcon {     width: 100px;     height: 100px;     left: 50% !important;     top: 50% !important;      margin-top: -50px;     margin-left: -50px;      font-size: 5px;     text-indent: -9999em;     border-top: 1.1em solid rgba(3,0,2, 0.2);     border-right: 1.1em solid rgba(3,0,2, 0.2);     border-bottom: 1.1em solid rgba(3,0,2, 0.2);     border-left: 1.1em solid #030002;     -webkit-transform: translateZ(0);     -ms-transform: translateZ(0);     transform: translateZ(0);     -webkit-animation: load8 1.1s infinite linear;     animation: load8 1.1s infinite linear; } :host >>> .loadingIcon, :host >>> .loadingIcon:after {     border-radius: 50%; } @-webkit-keyframes load8 {     0% {         -webkit-transform: rotate(0deg);         transform: rotate(0deg);     }     100% {         -webkit-transform: rotate(360deg);         transform: rotate(360deg);     } } @keyframes load8 {     0% {         -webkit-transform: rotate(0deg);         transform: rotate(0deg);     }     100% {         -webkit-transform: rotate(360deg);         transform: rotate(360deg);     } }  :host >>> * {     padding: 0;     margin: 0; }  :host >>> html {     height: 100%;     width: 100%;     /* Font size is needed to make the activity bar the correct size. */     font-size: 10px; }  :host >>> body {     height: 100%;     width: 100%;     background-color: #404040;     background-image: url(images/texture.png); }  :host >>> body, input, button, select {     font: message-box;     outline: none; }  :host >>> .hidden {     display: none !important; } :host >>> [hidden] {     display: none !important; }   #viewer-pdf-container {     overflow: auto;     -webkit-overflow-scrolling: touch;     position: absolute;     top: 32px;     right: 0;     bottom: 0;     left: 0;     outline: none; } html[dir='ltr'] #viewer-pdf-container {     box-shadow: inset 1px 0 0 hsla(0,0%,100%,.05); } html[dir='rtl'] #viewer-pdf-container {     box-shadow: inset -1px 0 0 hsla(0,0%,100%,.05); }"],
        providers: [rendering_queue_services_1.RenderingQueueServices]
    }),
    __metadata("design:paramtypes", [rendering_queue_services_1.RenderingQueueServices])
], PdfViewerComponent);
exports.PdfViewerComponent = PdfViewerComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmV0cy9wZGZWaWV3ZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRzs7Ozs7Ozs7Ozs7QUFFSCxzQ0FBK0Q7QUFDL0QsaUZBQThFO0FBVzlFLElBQWEsa0JBQWtCO0lBMkIzQiw0QkFBb0Isc0JBQThDO1FBQTlDLDJCQUFzQixHQUF0QixzQkFBc0IsQ0FBd0I7UUFsQmxFLGdCQUFXLEdBQVksSUFBSSxDQUFDO1FBVTVCLHFCQUFnQixHQUFXLE1BQU0sQ0FBQztRQUdsQyxtQkFBYyxHQUFXLElBQUksQ0FBQztRQUM5Qix3QkFBbUIsR0FBVyxHQUFHLENBQUM7UUFDbEMsY0FBUyxHQUFXLElBQUksQ0FBQztRQUN6QixjQUFTLEdBQVcsSUFBSSxDQUFDO0lBR3pCLENBQUM7SUFFRCx3Q0FBVyxHQUFYLFVBQVksT0FBTztRQUFuQixpQkFpQ0M7UUFoQ0csRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNoQixNQUFNLElBQUksS0FBSyxDQUFDLCtCQUErQixDQUFDLENBQUM7UUFDckQsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ2YsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBTyxFQUFFLE1BQU07Z0JBQy9CLElBQUksV0FBVyxHQUFHLEtBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxXQUFXLENBQUMsS0FBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUU1RCxXQUFXLENBQUMsVUFBVSxHQUFHLFVBQUMsWUFBWTtvQkFDbEMsSUFBSSxLQUFLLEdBQUcsWUFBWSxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDO29CQUNyRCxLQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUNsRCxDQUFD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RSxDQUFDLGlEQUFzQixDQUFDO0tBQ3RDLENBQUM7cUNBNEI4QyxpREFBc0I7R0EzQnpELGtCQUFrQixDQStWOUI7QUEvVlksZ0RBQWtCIiwiZmlsZSI6ImNvbXBvbmV0cy9wZGZWaWV3ZXIuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgSG9zdExpc3RlbmVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSZW5kZXJpbmdRdWV1ZVNlcnZpY2VzIH0gZnJvbSAnLi4vc2VydmljZXMvcmVuZGVyaW5nLXF1ZXVlLnNlcnZpY2VzJztcblxuZGVjbGFyZSBsZXQgUERGSlM6IGFueTtcblxuQENvbXBvbmVudCh7XG4gICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICBzZWxlY3RvcjogJ3BkZi12aWV3ZXInLFxuICAgIHRlbXBsYXRlOiBcIjwhLS0gU3RhcnQgUGRmIENhbnZhcyAtLT4gPGRpdiBpZD1cXFwidmlld2VyLXBkZi1jb250YWluZXJcXFwiIGNsYXNzPVxcXCJ2aWV3ZXItcGRmLWNvbnRhaW5lclxcXCIgKGtleXByZXNzKT1ldmVudEhhbmRsZXIoKSAod2luZG93OnJlc2l6ZSk9XFxcIm9uUmVzaXplKCRldmVudClcXFwiPiAgICAgPGRpdiBpZD1cXFwidmlld2VyLXZpZXdlclBkZlxcXCIgY2xhc3M9XFxcInBkZlZpZXdlclxcXCI+ICAgICAgICAgPGRpdiBpZD1cXFwibG9hZGVyLWNvbnRhaW5lclxcXCIgY2xhc3M9XFxcImxvYWRlci1jb250YWluZXJcXFwiPiAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsb2FkZXItaXRlbVxcXCI+ICAgICAgICAgICAgICAgICA8ZGl2IGlkPVxcXCJsb2FkZXItc3BpblxcXCIgY2xhc3M9XFxcIm1kbC1wcm9ncmVzcyBtZGwtanMtcHJvZ3Jlc3MgbWRsLXByb2dyZXNzX19pbmRldGVybWluYXRlXFxcIj48L2Rpdj4gICAgICAgICAgICAgICAgIDxkaXYgaWQ9XFxcImxvYWRlci10ZXh0XFxcIiBjbGFzcz1cXFwibG9hZGVyLXRleHRcXFwiPkxvYWRpbmcgPHNwYW4+e3tuYW1lRmlsZX19PC9zcGFuPiB7e2xhb2RpbmdQZXJjZW50fX0lPC9kaXY+ICAgICAgICAgICAgIDwvZGl2ID4gICAgICAgICA8L2Rpdj4gICAgIDwvZGl2PiA8L2Rpdj4gPCEtLSBFbmQgUGRmIENhbnZhcyAtLT4gICA8IS0tIFBhZ2luYXRpb24gdG9vbGJhciBzdGFydCAtLT4gPGRpdiAqbmdJZj1cXFwic2hvd1Rvb2xiYXJcXFwiIGlkPVxcXCJ2aWV3ZXItdG9vbGJhci1wYWdpbmF0aW9uXFxcIiBjbGFzcz1cXFwidmlld2VyLXRvb2xiYXItcGFnaW5hdGlvbiBtZGwtY2VsbC0taGlkZS10YWJsZXQgbWRsLWNlbGwtLWhpZGUtcGhvbmVcXFwiPiAgICAgPGRpdiBpZD1cXFwidmlld2VyLXByZXZpb3VzLXBhZ2UtYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnV0dG9uLXBhZ2UgbGVmdFxcXCIgKGNsaWNrKT1cXFwicHJldmlvdXNQYWdlKClcXFwiPiAgICAgICAgIDxpIGNsYXNzPVxcXCJpY29uIG1hdGVyaWFsLWljb25zXFxcIj5rZXlib2FyZF9hcnJvd19sZWZ0PC9pPiAgICAgPC9kaXY+ICAgICAgPGRpdiBjbGFzcz1cXFwidmlld2VyLXBhZ2UtY291bnRlciBsZWZ0XFxcIiA+ICAgICAgICAgPGlucHV0IGlkPVxcXCJ2aWV3ZXItcGFnZW51bWJlci1pbnB1dFxcXCIgICNwYWdlICAgICAgICAgICAgICAgIChrZXl1cC5lbnRlcik9XFxcImlucHV0UGFnZShwYWdlLnZhbHVlKVxcXCIgY2xhc3M9XFxcInZpZXdlci1wYWdlbnVtYmVyLWlucHV0IGxlZnRcXFwiIHR5cGU9XFxcInRleHRcXFwiIHBhdHRlcm49XFxcIi0/WzAtOV0qKFxcXFwuWzAtOV0rKT9cXFwiIHZhbHVlPVxcXCJ7e2Rpc3BsYXlQYWdlfX1cXFwiPiAgICAgICAgIDxkaXYgaWQ9XFxcInZpZXdlci10b3RhbC1wYWdlc1xcXCIgIGNsYXNzPVxcXCJsZWZ0IHZpZXdlci10b3RhbC1wYWdlc1xcXCI+LyB7e3RvdGFsUGFnZXN9fTwvZGl2PiAgICAgPC9kaXY+ICAgICAgPGRpdiBpZD1cXFwidmlld2VyLW5leHQtcGFnZS1idXR0b25cXFwiIGNsYXNzPVxcXCJidXR0b24tcGFnZSBsZWZ0XFxcIiAgKGNsaWNrKT1cXFwibmV4dFBhZ2UoKVxcXCIgPiAgICAgICAgIDxpIGNsYXNzPVxcXCJpY29uIG1hdGVyaWFsLWljb25zXFxcIiA+a2V5Ym9hcmRfYXJyb3dfcmlnaHQ8L2k+ICAgICA8L2Rpdj4gPC9kaXY+IDwhLS0gUGFnaW5hdGlvbiB0b29sYmFyIGVuZCAtLT4gIDwhLS0gQ29tbWFuZCB0b29sYmFyIHN0YXJ0IC0tPiA8ZGl2ICpuZ0lmPVxcXCJzaG93VG9vbGJhclxcXCIgIGlkPVxcXCJ2aWV3ZXItdG9vbGJhci1jb21tYW5kXFxcIiBjbGFzcz1cXFwidmlld2VyLXRvb2xiYXItY29tbWFuZFxcXCI+ICAgICA8ZGl2IGlkPVxcXCJ2aWV3ZXItc2NhbGUtcGFnZS1idXR0b25cXFwiIGNsYXNzPVxcXCJidXR0b24tcGFnZSBsZWZ0XFxcIiAoY2xpY2spPVxcXCJwYWdlRml0KClcXFwiPiAgICAgICAgIDxpIGNsYXNzPVxcXCJpY29uIG1hdGVyaWFsLWljb25zXFxcIj56b29tX291dF9tYXA8L2k+ICAgICA8L2Rpdj4gICAgIDxkaXYgaWQ9XFxcInZpZXdlci16b29tLWluLWJ1dHRvblxcXCIgY2xhc3M9XFxcImJ1dHRvbi1wYWdlIGxlZnRcXFwiIChjbGljayk9XFxcInpvb21JbigpXFxcIj4gICAgICAgICA8aSBjbGFzcz1cXFwiaWNvbiBtYXRlcmlhbC1pY29uc1xcXCI+em9vbV9pbjwvaT4gICAgIDwvZGl2PiAgICAgPGRpdiBpZD1cXFwidmlld2VyLXpvb20tb3V0LWJ1dHRvblxcXCIgY2xhc3M9XFxcImJ1dHRvbi1wYWdlIGxlZnRcXFwiIChjbGljayk9XFxcInpvb21PdXQoKVxcXCI+ICAgICAgICAgPGkgY2xhc3M9XFxcImljb24gbWF0ZXJpYWwtaWNvbnNcXFwiPnpvb21fb3V0PC9pPiAgICAgPC9kaXY+IDwvZGl2PiA8IS0tIENvbW1hbmQgdG9vbGJhciBlbmQgLS0+XCIsXG4gICAgc3R5bGVzOiBbXCIubG9hZGVyLWNvbnRhaW5lciB7ICAgICBkaXNwbGF5OiAtd2Via2l0LWJveDsgICAgICAvKiBPTEQgLSBpT1MgNi0sIFNhZmFyaSAzLjEtNiAqLyAgICAgZGlzcGxheTogLW1vei1ib3g7ICAgICAgICAgLyogT0xEIC0gRmlyZWZveCAxOS0gKGJ1Z2d5IGJ1dCBtb3N0bHkgd29ya3MpICovICAgICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7ICAgICAvKiBORVcgLSBDaHJvbWUgKi8gICAgIGRpc3BsYXk6IGZsZXg7ICAgICAgICAgICAgIC8qIE5FVywgU3BlYyAtIE9wZXJhIDEyLjEsIEZpcmVmb3ggMjArICovICAgICAtd2Via2l0LWJveC1mbGV4LWRpcmVjdGlvbjogcm93OyAgICAgLW1vei1ib3gtZmxleC1kaXJlY3Rpb246IHJvdzsgICAgIC13ZWJraXQtZmxleC1kaXJlY3Rpb246IHJvdzsgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7ICAgICBoZWlnaHQ6MTAwJTsgfSAgLmxvYWRlci1pdGVtIHsgICAgIG1hcmdpbjogYXV0bzsgICAgIG1heC1oZWlnaHQ6MTAwcHg7ICAgICBtYXgtd2lkdGg6MzAwcHg7IH0gIC5sb2FkZXItdGV4dHsgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7ICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7ICAgICBwb3NpdGlvbjogcmVsYXRpdmU7ICAgICBjb2xvciA6ICNmZmY7IH0gIC5sZWZ0IHsgICAgIGZsb2F0OiBsZWZ0OyB9ICAudmlld2VyLXRvb2xiYXItcGFnaW5hdGlvbnsgICAgIHBhZGRpbmctdG9wOiA0cHg7ICAgICB0b3A6IDgwcHg7ICAgICByaWdodDozNXB4OyAgICAgd2lkdGg6YXV0bzsgICAgIHBvc2l0aW9uOmFic29sdXRlOyAgICAgYm9yZGVyLXJhZGl1czogMTBweDsgICAgIGJhY2tncm91bmQ6ICMzRTNFM0U7ICAgICBjb2xvcjogd2hpdGU7IH0gIC52aWV3ZXItdG9vbGJhci1jb21tYW5keyAgICAgaGVpZ2h0OiAzMHB4OyAgICAgcGFkZGluZy10b3A6IDRweDsgICAgIHRvcDogODBweDsgICAgIGxlZnQ6MzVweDsgICAgIHdpZHRoOmF1dG87ICAgICBwb3NpdGlvbjphYnNvbHV0ZTsgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7ICAgICBiYWNrZ3JvdW5kOiAjM0UzRTNFOyAgICAgY29sb3I6IHdoaXRlOyB9ICAudmlld2VyLXBhZ2VudW1iZXItaW5wdXQgeyAgICAgYm9yZGVyOiBub25lOyAgICAgZGlzcGxheTogYmxvY2s7ICAgICBmb250LXNpemU6IDE2cHg7ICAgICBwYWRkaW5nOiA0cHggMDsgICAgIGJhY2tncm91bmQ6IDAgMDsgICAgIHRleHQtYWxpZ246IHJpZ2h0OyAgICAgY29sb3I6IGluaGVyaXQ7ICAgICB3aWR0aDogMzNweDsgICAgIG1hcmdpbi1yaWdodDogNHB4OyAgICAgaGVpZ2h0OiAyMHB4OyB9ICAudmlld2VyLXRvdGFsLXBhZ2VzIHsgICAgIGJvcmRlcjogbWVkaXVtIG5vbmU7ICAgICBkaXNwbGF5OiBmbGV4OyAgICAgZm9udC1zaXplOiAxNnB4OyAgICAgcGFkZGluZzogNHB4IDBweDsgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50IG5vbmUgcmVwZWF0IHNjcm9sbCAwcHggMHB4OyAgICAgdGV4dC1hbGlnbjogcmlnaHQ7ICAgICBjb2xvcjogaW5oZXJpdDsgICAgIG1hcmdpbi1yaWdodDogNHB4OyAgICAgaGVpZ2h0OiAyMHB4OyAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOyB9ICAudmlld2VyLXBhZ2UtY291bnRlciB7ICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7IH0gIC5idXR0b24tcGFnZSB7ICAgICBtYXJnaW4tcmlnaHQ6IDRweDsgICAgIGhlaWdodDogMjRweDsgICAgIHdpZHRoOiAyNHB4OyAgICAgbWFyZ2luLWxlZnQ6IDRweDsgICAgIGN1cnNvcjogcG9pbnRlcjsgfSAgLmJ1dHRvbi1wYWdlOmhvdmVyIHsgICAgIGN1cnNvcjogcG9pbnRlcjsgICAgIGJhY2tncm91bmQ6IGdyZXk7ICAgICBib3JkZXItcmFkaXVzOiAyNHB4OyB9IDpob3N0ID4+PiAudGV4dExheWVyIHsgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgICAgIGxlZnQ6IDA7ICAgICB0b3A6IDA7ICAgICByaWdodDogMDsgICAgIGJvdHRvbTogMDsgICAgIG92ZXJmbG93OiBoaWRkZW47ICAgICBvcGFjaXR5OiAwLjI7ICAgICBsaW5lLWhlaWdodDogMS4wOyB9ICA6aG9zdCA+Pj4gLnRleHRMYXllciA+IGRpdiB7ICAgICBjb2xvcjogdHJhbnNwYXJlbnQ7ICAgICBwb3NpdGlvbjogYWJzb2x1dGU7ICAgICB3aGl0ZS1zcGFjZTogcHJlOyAgICAgY3Vyc29yOiB0ZXh0OyAgICAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAwJSAwJTsgICAgIC1tb3otdHJhbnNmb3JtLW9yaWdpbjogMCUgMCU7ICAgICAtby10cmFuc2Zvcm0tb3JpZ2luOiAwJSAwJTsgICAgIC1tcy10cmFuc2Zvcm0tb3JpZ2luOiAwJSAwJTsgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAlIDAlOyB9ICA6aG9zdCA+Pj4gLnRleHRMYXllciAuaGlnaGxpZ2h0IHsgICAgIG1hcmdpbjogLTFweDsgICAgIHBhZGRpbmc6IDFweDsgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTgwLCAwLCAxNzApOyAgICAgYm9yZGVyLXJhZGl1czogNHB4OyB9ICA6aG9zdCA+Pj4gLnRleHRMYXllciAuaGlnaGxpZ2h0LmJlZ2luIHsgICAgIGJvcmRlci1yYWRpdXM6IDRweCAwcHggMHB4IDRweDsgfSAgOmhvc3QgPj4+IC50ZXh0TGF5ZXIgLmhpZ2hsaWdodC5lbmQgeyAgICAgYm9yZGVyLXJhZGl1czogMHB4IDRweCA0cHggMHB4OyB9ICA6aG9zdCA+Pj4gLnRleHRMYXllciAuaGlnaGxpZ2h0Lm1pZGRsZSB7ICAgICBib3JkZXItcmFkaXVzOiAwcHg7IH0gIDpob3N0ID4+PiAudGV4dExheWVyIC5oaWdobGlnaHQuc2VsZWN0ZWQgeyAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDAsIDEwMCwgMCk7IH0gIDpob3N0ID4+PiAudGV4dExheWVyIDo6c2VsZWN0aW9uIHsgYmFja2dyb3VuZDogcmdiKDAsMCwyNTUpOyB9IDpob3N0ID4+PiAudGV4dExheWVyIDo6LW1vei1zZWxlY3Rpb24geyBiYWNrZ3JvdW5kOiByZ2IoMCwwLDI1NSk7IH0gIDpob3N0ID4+PiAudGV4dExheWVyIC5lbmRPZkNvbnRlbnQgeyAgICAgZGlzcGxheTogYmxvY2s7ICAgICBwb3NpdGlvbjogYWJzb2x1dGU7ICAgICBsZWZ0OiAwcHg7ICAgICB0b3A6IDEwMCU7ICAgICByaWdodDogMHB4OyAgICAgYm90dG9tOiAwcHg7ICAgICB6LWluZGV4OiAtMTsgICAgIGN1cnNvcjogZGVmYXVsdDsgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7ICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7ICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOyB9ICA6aG9zdCA+Pj4gLnRleHRMYXllciAuZW5kT2ZDb250ZW50LmFjdGl2ZSB7ICAgICB0b3A6IDBweDsgfSAgIDpob3N0ID4+PiAuYW5ub3RhdGlvbkxheWVyIHNlY3Rpb24geyAgICAgcG9zaXRpb246IGFic29sdXRlOyB9ICA6aG9zdCA+Pj4gLmFubm90YXRpb25MYXllciAubGlua0Fubm90YXRpb24gPiBhIHsgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgICAgIGZvbnQtc2l6ZTogMWVtOyAgICAgdG9wOiAwOyAgICAgbGVmdDogMDsgICAgIHdpZHRoOiAxMDAlOyAgICAgaGVpZ2h0OiAxMDAlOyB9ICA6aG9zdCA+Pj4gLmFubm90YXRpb25MYXllciAubGlua0Fubm90YXRpb24gPiBhIC8qIC1tcy1hICovICB7ICAgICBiYWNrZ3JvdW5kOiB1cmwoXFxcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veUg1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlCUkFBN1xcXCIpIDAgMCByZXBlYXQ7IH0gIDpob3N0ID4+PiAuYW5ub3RhdGlvbkxheWVyIC5saW5rQW5ub3RhdGlvbiA+IGE6aG92ZXIgeyAgICAgb3BhY2l0eTogMC4yOyAgICAgYmFja2dyb3VuZDogI2ZmMDsgICAgIGJveC1zaGFkb3c6IDBweCAycHggMTBweCAjZmYwOyB9ICA6aG9zdCA+Pj4gLmFubm90YXRpb25MYXllciAudGV4dEFubm90YXRpb24gaW1nIHsgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgICAgIGN1cnNvcjogcG9pbnRlcjsgfSAgOmhvc3QgPj4+IC5hbm5vdGF0aW9uTGF5ZXIgLnBvcHVwV3JhcHBlciB7ICAgICBwb3NpdGlvbjogYWJzb2x1dGU7ICAgICB3aWR0aDogMjBlbTsgfSAgOmhvc3QgPj4+IC5hbm5vdGF0aW9uTGF5ZXIgLnBvcHVwIHsgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgICAgIHotaW5kZXg6IDIwMDsgICAgIG1heC13aWR0aDogMjBlbTsgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGOTk7ICAgICBib3gtc2hhZG93OiAwcHggMnB4IDVweCAjMzMzOyAgICAgYm9yZGVyLXJhZGl1czogMnB4OyAgICAgcGFkZGluZzogMC42ZW07ICAgICBtYXJnaW4tbGVmdDogNXB4OyAgICAgY3Vyc29yOiBwb2ludGVyOyAgICAgd29yZC13cmFwOiBicmVhay13b3JkOyB9ICA6aG9zdCA+Pj4gLmFubm90YXRpb25MYXllciAucG9wdXAgaDEgeyAgICAgZm9udC1zaXplOiAxZW07ICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzAwMDAwMDsgICAgIHBhZGRpbmctYm90dG9tOiAwLjJlbTsgfSAgOmhvc3QgPj4+IC5hbm5vdGF0aW9uTGF5ZXIgLnBvcHVwIHAgeyAgICAgcGFkZGluZy10b3A6IDAuMmVtOyB9ICA6aG9zdCA+Pj4gLmFubm90YXRpb25MYXllciAuaGlnaGxpZ2h0QW5ub3RhdGlvbiwgLmFubm90YXRpb25MYXllciAudW5kZXJsaW5lQW5ub3RhdGlvbiwgLmFubm90YXRpb25MYXllciAuc3F1aWdnbHlBbm5vdGF0aW9uLCAuYW5ub3RhdGlvbkxheWVyIC5zdHJpa2VvdXRBbm5vdGF0aW9uLCAuYW5ub3RhdGlvbkxheWVyIC5maWxlQXR0YWNobWVudEFubm90YXRpb24geyAgICAgY3Vyc29yOiBwb2ludGVyOyB9ICA6aG9zdCA+Pj4gLnBkZlZpZXdlciAuY2FudmFzV3JhcHBlciB7ICAgICBvdmVyZmxvdzogaGlkZGVuOyB9ICA6aG9zdCA+Pj4gLnBkZlZpZXdlciAucGFnZSB7ICAgICBkaXJlY3Rpb246IGx0cjsgICAgIHdpZHRoOiA4MTZweDsgICAgIGhlaWdodDogMTA1NnB4OyAgICAgbWFyZ2luOiAxcHggYXV0byAtOHB4IGF1dG87ICAgICBwb3NpdGlvbjogcmVsYXRpdmU7ICAgICBvdmVyZmxvdzogdmlzaWJsZTsgICAgIGJvcmRlcjogOXB4IHNvbGlkIHRyYW5zcGFyZW50OyAgICAgYmFja2dyb3VuZC1jbGlwOiBjb250ZW50LWJveDsgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOyB9ICA6aG9zdCA+Pj4gLnBkZlZpZXdlci5yZW1vdmVQYWdlQm9yZGVycyAucGFnZSB7ICAgICBtYXJnaW46IDBweCBhdXRvIDEwcHggYXV0bzsgICAgIGJvcmRlcjogbm9uZTsgfSAgOmhvc3QgPj4+IC5wZGZWaWV3ZXIgLnBhZ2UgY2FudmFzIHsgICAgIG1hcmdpbjogMDsgICAgIGRpc3BsYXk6IGJsb2NrOyB9ICA6aG9zdCA+Pj4gLnBkZlZpZXdlciAucGFnZSAubG9hZGluZ0ljb24geyAgICAgcG9zaXRpb246IGFic29sdXRlOyAgICAgZGlzcGxheTogYmxvY2s7ICAgICBsZWZ0OiAwOyAgICAgdG9wOiAwOyAgICAgcmlnaHQ6IDA7ICAgICBib3R0b206IDA7IH0gIDpob3N0ID4+PiAubG9hZGluZ0ljb24geyAgICAgd2lkdGg6IDEwMHB4OyAgICAgaGVpZ2h0OiAxMDBweDsgICAgIGxlZnQ6IDUwJSAhaW1wb3J0YW50OyAgICAgdG9wOiA1MCUgIWltcG9ydGFudDsgICAgICBtYXJnaW4tdG9wOiAtNTBweDsgICAgIG1hcmdpbi1sZWZ0OiAtNTBweDsgICAgICBmb250LXNpemU6IDVweDsgICAgIHRleHQtaW5kZW50OiAtOTk5OWVtOyAgICAgYm9yZGVyLXRvcDogMS4xZW0gc29saWQgcmdiYSgzLDAsMiwgMC4yKTsgICAgIGJvcmRlci1yaWdodDogMS4xZW0gc29saWQgcmdiYSgzLDAsMiwgMC4yKTsgICAgIGJvcmRlci1ib3R0b206IDEuMWVtIHNvbGlkIHJnYmEoMywwLDIsIDAuMik7ICAgICBib3JkZXItbGVmdDogMS4xZW0gc29saWQgIzAzMDAwMjsgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOyAgICAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsgICAgIC13ZWJraXQtYW5pbWF0aW9uOiBsb2FkOCAxLjFzIGluZmluaXRlIGxpbmVhcjsgICAgIGFuaW1hdGlvbjogbG9hZDggMS4xcyBpbmZpbml0ZSBsaW5lYXI7IH0gOmhvc3QgPj4+IC5sb2FkaW5nSWNvbiwgOmhvc3QgPj4+IC5sb2FkaW5nSWNvbjphZnRlciB7ICAgICBib3JkZXItcmFkaXVzOiA1MCU7IH0gQC13ZWJraXQta2V5ZnJhbWVzIGxvYWQ4IHsgICAgIDAlIHsgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyAgICAgfSAgICAgMTAwJSB7ICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7ICAgICB9IH0gQGtleWZyYW1lcyBsb2FkOCB7ICAgICAwJSB7ICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgICAgIH0gICAgIDEwMCUgeyAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyAgICAgfSB9ICA6aG9zdCA+Pj4gKiB7ICAgICBwYWRkaW5nOiAwOyAgICAgbWFyZ2luOiAwOyB9ICA6aG9zdCA+Pj4gaHRtbCB7ICAgICBoZWlnaHQ6IDEwMCU7ICAgICB3aWR0aDogMTAwJTsgICAgIC8qIEZvbnQgc2l6ZSBpcyBuZWVkZWQgdG8gbWFrZSB0aGUgYWN0aXZpdHkgYmFyIHRoZSBjb3JyZWN0IHNpemUuICovICAgICBmb250LXNpemU6IDEwcHg7IH0gIDpob3N0ID4+PiBib2R5IHsgICAgIGhlaWdodDogMTAwJTsgICAgIHdpZHRoOiAxMDAlOyAgICAgYmFja2dyb3VuZC1jb2xvcjogIzQwNDA0MDsgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChpbWFnZXMvdGV4dHVyZS5wbmcpOyB9ICA6aG9zdCA+Pj4gYm9keSwgaW5wdXQsIGJ1dHRvbiwgc2VsZWN0IHsgICAgIGZvbnQ6IG1lc3NhZ2UtYm94OyAgICAgb3V0bGluZTogbm9uZTsgfSAgOmhvc3QgPj4+IC5oaWRkZW4geyAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9IDpob3N0ID4+PiBbaGlkZGVuXSB7ICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0gICAjdmlld2VyLXBkZi1jb250YWluZXIgeyAgICAgb3ZlcmZsb3c6IGF1dG87ICAgICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7ICAgICBwb3NpdGlvbjogYWJzb2x1dGU7ICAgICB0b3A6IDMycHg7ICAgICByaWdodDogMDsgICAgIGJvdHRvbTogMDsgICAgIGxlZnQ6IDA7ICAgICBvdXRsaW5lOiBub25lOyB9IGh0bWxbZGlyPSdsdHInXSAjdmlld2VyLXBkZi1jb250YWluZXIgeyAgICAgYm94LXNoYWRvdzogaW5zZXQgMXB4IDAgMCBoc2xhKDAsMCUsMTAwJSwuMDUpOyB9IGh0bWxbZGlyPSdydGwnXSAjdmlld2VyLXBkZi1jb250YWluZXIgeyAgICAgYm94LXNoYWRvdzogaW5zZXQgLTFweCAwIDAgaHNsYSgwLDAlLDEwMCUsLjA1KTsgfVwiXSxcbiAgICBwcm92aWRlcnM6IFtSZW5kZXJpbmdRdWV1ZVNlcnZpY2VzXVxufSlcbmV4cG9ydCBjbGFzcyBQZGZWaWV3ZXJDb21wb25lbnQge1xuXG4gICAgQElucHV0KClcbiAgICB1cmxGaWxlOiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKVxuICAgIG5hbWVGaWxlOiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKVxuICAgIHNob3dUb29sYmFyOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIGN1cnJlbnRQZGZEb2N1bWVudDogYW55O1xuICAgIHBhZ2U6IG51bWJlcjtcbiAgICBkaXNwbGF5UGFnZTogbnVtYmVyO1xuICAgIHRvdGFsUGFnZXM6IG51bWJlcjtcbiAgICBsYW9kaW5nUGVyY2VudDogbnVtYmVyO1xuXG4gICAgcGRmVmlld2VyOiBhbnk7XG5cbiAgICBjdXJyZW50U2NhbGVNb2RlOiBzdHJpbmcgPSAnYXV0byc7XG4gICAgY3VycmVudFNjYWxlOiBudW1iZXI7XG5cbiAgICBNQVhfQVVUT19TQ0FMRTogbnVtYmVyID0gMS4yNTtcbiAgICBERUZBVUxUX1NDQUxFX0RFTFRBOiBudW1iZXIgPSAxLjE7XG4gICAgTUlOX1NDQUxFOiBudW1iZXIgPSAwLjI1O1xuICAgIE1BWF9TQ0FMRTogbnVtYmVyID0gMTAuMDtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVuZGVyaW5nUXVldWVTZXJ2aWNlczogUmVuZGVyaW5nUXVldWVTZXJ2aWNlcykge1xuICAgIH1cblxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnVybEZpbGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXR0cmlidXRlIHVybEZpbGUgaXMgcmVxdWlyZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnVybEZpbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGxvYWRpbmdUYXNrID0gdGhpcy5nZXRQREZKUygpLmdldERvY3VtZW50KHRoaXMudXJsRmlsZSk7XG5cbiAgICAgICAgICAgICAgICBsb2FkaW5nVGFzay5vblByb2dyZXNzID0gKHByb2dyZXNzRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGV2ZWwgPSBwcm9ncmVzc0RhdGEubG9hZGVkIC8gcHJvZ3Jlc3NEYXRhLnRvdGFsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhb2RpbmdQZXJjZW50ID0gTWF0aC5yb3VuZChsZXZlbCAqIDEwMCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGxvYWRpbmdUYXNrLnRoZW4oKHBkZkRvY3VtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBkZkRvY3VtZW50ID0gcGRmRG9jdW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxQYWdlcyA9IHBkZkRvY3VtZW50Lm51bVBhZ2VzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlQYWdlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0UERGVmlld2VyKHRoaXMuY3VycmVudFBkZkRvY3VtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQZGZEb2N1bWVudC5nZXRQYWdlKDEpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2FsZVBhZ2UoJ2F1dG8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gdGhlIFBERkpTIGdsb2JhbCBvYmplY3QgKGV4aXN0IHRvIGZhY2lsaXRhdGUgdGhlIG1vY2sgb2YgUERGSlMgaW4gdGhlIHRlc3QpXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UERGSlN9XG4gICAgICovXG4gICAgZ2V0UERGSlMoKSB7XG4gICAgICAgIHJldHVybiBQREZKUztcbiAgICB9XG5cbiAgICBpbml0UERGVmlld2VyKHBkZkRvY3VtZW50OiBhbnkpIHtcbiAgICAgICAgUERGSlMudmVyYm9zaXR5ID0gMTtcbiAgICAgICAgUERGSlMuZGlzYWJsZVdvcmtlciA9IGZhbHNlO1xuXG4gICAgICAgIGxldCBkb2N1bWVudENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3ZXItcGRmLWNvbnRhaW5lcicpO1xuICAgICAgICBsZXQgdmlld2VyOiBhbnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld2VyLXZpZXdlclBkZicpO1xuXG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hTY3JvbGwoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgdGhpcy5wZGZWaWV3ZXIgPSBuZXcgUERGSlMuUERGVmlld2VyKHtcbiAgICAgICAgICAgIGNvbnRhaW5lcjogZG9jdW1lbnRDb250YWluZXIsXG4gICAgICAgICAgICB2aWV3ZXI6IHZpZXdlcixcbiAgICAgICAgICAgIHJlbmRlcmluZ1F1ZXVlOiB0aGlzLnJlbmRlcmluZ1F1ZXVlU2VydmljZXNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJpbmdRdWV1ZVNlcnZpY2VzLnNldFZpZXdlcih0aGlzLnBkZlZpZXdlcik7XG5cbiAgICAgICAgdGhpcy5wZGZWaWV3ZXIuc2V0RG9jdW1lbnQocGRmRG9jdW1lbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBzY2FsZSB0aGUgcGFnZSBjdXJyZW50IHN1cHBvcnQgaW1wbGVtZW50YXRpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzY2FsZU1vZGUgLSBuZXcgc2NhbGUgbW9kZVxuICAgICAqL1xuICAgIHNjYWxlUGFnZShzY2FsZU1vZGUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U2NhbGVNb2RlID0gc2NhbGVNb2RlO1xuXG4gICAgICAgIGlmICh0aGlzLnBkZlZpZXdlcikge1xuXG4gICAgICAgICAgICBsZXQgdmlld2VyQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlci1tYWluLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgbGV0IGRvY3VtZW50Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlci1wZGYtY29udGFpbmVyJyk7XG5cbiAgICAgICAgICAgIGxldCB3aWR0aENvbnRhaW5lcjtcbiAgICAgICAgICAgIGxldCBoZWlndGhDb250YWluZXI7XG5cbiAgICAgICAgICAgIGlmICh2aWV3ZXJDb250YWluZXIgJiYgdmlld2VyQ29udGFpbmVyLmNsaWVudFdpZHRoIDw9IGRvY3VtZW50Q29udGFpbmVyLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgd2lkdGhDb250YWluZXIgPSB2aWV3ZXJDb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgaGVpZ3RoQ29udGFpbmVyID0gdmlld2VyQ29udGFpbmVyLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2lkdGhDb250YWluZXIgPSBkb2N1bWVudENvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgICAgICBoZWlndGhDb250YWluZXIgPSBkb2N1bWVudENvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBjdXJyZW50UGFnZSA9IHRoaXMucGRmVmlld2VyLl9wYWdlc1t0aGlzLnBkZlZpZXdlci5fY3VycmVudFBhZ2VOdW1iZXJdO1xuXG4gICAgICAgICAgICBsZXQgcGFkZGluZyA9IDIwO1xuICAgICAgICAgICAgbGV0IHBhZ2VXaWR0aFNjYWxlID0gKHdpZHRoQ29udGFpbmVyIC0gcGFkZGluZykgLyBjdXJyZW50UGFnZS53aWR0aCAqIGN1cnJlbnRQYWdlLnNjYWxlO1xuICAgICAgICAgICAgbGV0IHBhZ2VIZWlnaHRTY2FsZSA9IChoZWlndGhDb250YWluZXIgLSBwYWRkaW5nKSAvIGN1cnJlbnRQYWdlLndpZHRoICogY3VycmVudFBhZ2Uuc2NhbGU7XG5cbiAgICAgICAgICAgIGxldCBzY2FsZTtcblxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnRTY2FsZU1vZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdwYWdlLWFjdHVhbCc6XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncGFnZS13aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlID0gcGFnZVdpZHRoU2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BhZ2UtaGVpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgc2NhbGUgPSBwYWdlSGVpZ2h0U2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BhZ2UtZml0JzpcbiAgICAgICAgICAgICAgICAgICAgc2NhbGUgPSBNYXRoLm1pbihwYWdlV2lkdGhTY2FsZSwgcGFnZUhlaWdodFNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0byc6XG4gICAgICAgICAgICAgICAgICAgIGxldCBob3Jpem9udGFsU2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTGFuZHNjYXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsU2NhbGUgPSBNYXRoLm1pbihwYWdlSGVpZ2h0U2NhbGUsIHBhZ2VXaWR0aFNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvcml6b250YWxTY2FsZSA9IHBhZ2VXaWR0aFNjYWxlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlID0gTWF0aC5taW4odGhpcy5NQVhfQVVUT19TQ0FMRSwgaG9yaXpvbnRhbFNjYWxlKTtcblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdwZGZWaWV3U2V0U2NhbGU6IFxcJycgKyBzY2FsZU1vZGUgKyAnXFwnIGlzIGFuIHVua25vd24gem9vbSB2YWx1ZS4nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldFNjYWxlVXBkYXRlUGFnZXMoc2NhbGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFsbCB0aGUgcGFnZXMgd2l0aCB0aGUgbmV3U2NhbGUgc2NhbGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXdTY2FsZSAtIG5ldyBzY2FsZSBwYWdlXG4gICAgICovXG4gICAgc2V0U2NhbGVVcGRhdGVQYWdlcyhuZXdTY2FsZTogbnVtYmVyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1NhbWVTY2FsZSh0aGlzLmN1cnJlbnRTY2FsZSwgbmV3U2NhbGUpKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTY2FsZSA9IG5ld1NjYWxlO1xuXG4gICAgICAgICAgICB0aGlzLnBkZlZpZXdlci5fcGFnZXMuZm9yRWFjaChmdW5jdGlvbiAoY3VycmVudFBhZ2UpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZS51cGRhdGUobmV3U2NhbGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMucGRmVmlld2VyLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbWV0aG9kIHRvIGNoZWNrIGlmIHRoZSByZXF1ZXN0IHNjYWxlIG9mIHRoZSBwYWdlIGlzIHRoZSBzYW1lIGZvciBhdm9pZCB1bnVzZWZ1bCByZS1yZW5kZXJpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvbGRTY2FsZSAtIG9sZCBzY2FsZSBwYWdlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG5ld1NjYWxlIC0gbmV3IHNjYWxlIHBhZ2VcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzU2FtZVNjYWxlKG9sZFNjYWxlOiBudW1iZXIsIG5ld1NjYWxlOiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIChuZXdTY2FsZSA9PT0gb2xkU2NhbGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIG1ldGhvZCB0byBjaGVjayBpZiBpcyBhIGxhbmQgc2NhcGUgdmlld1xuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgICAqXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNMYW5kc2NhcGUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuICh3aWR0aCA+IGhlaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRyaWdnZXJlZCB3aGVuIHRoZSBwYWdlIGlzIHJlc2l6ZWRcbiAgICAgKi9cbiAgICBvblJlc2l6ZSgpIHtcbiAgICAgICAgdGhpcy5zY2FsZVBhZ2UodGhpcy5jdXJyZW50U2NhbGVNb2RlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB0b2dnbGUgdGhlIGZpdCBwYWdlIHBkZlxuICAgICAqL1xuICAgIHBhZ2VGaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTY2FsZU1vZGUgIT09ICdwYWdlLWZpdCcpIHtcbiAgICAgICAgICAgIHRoaXMuc2NhbGVQYWdlKCdwYWdlLWZpdCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zY2FsZVBhZ2UoJ2F1dG8nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHpvb20gaW4gcGFnZSBwZGZcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aWNrc1xuICAgICAqL1xuICAgIHpvb21Jbih0aWNrczogbnVtYmVyKSB7XG4gICAgICAgIGxldCBuZXdTY2FsZTogYW55ID0gdGhpcy5jdXJyZW50U2NhbGU7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIG5ld1NjYWxlID0gKG5ld1NjYWxlICogdGhpcy5ERUZBVUxUX1NDQUxFX0RFTFRBKS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgbmV3U2NhbGUgPSBNYXRoLmNlaWwobmV3U2NhbGUgKiAxMCkgLyAxMDtcbiAgICAgICAgICAgIG5ld1NjYWxlID0gTWF0aC5taW4odGhpcy5NQVhfU0NBTEUsIG5ld1NjYWxlKTtcbiAgICAgICAgfSB3aGlsZSAoLS10aWNrcyA+IDAgJiYgbmV3U2NhbGUgPCB0aGlzLk1BWF9TQ0FMRSk7XG4gICAgICAgIHRoaXMuY3VycmVudFNjYWxlTW9kZSA9ICdhdXRvJztcbiAgICAgICAgdGhpcy5zZXRTY2FsZVVwZGF0ZVBhZ2VzKG5ld1NjYWxlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB6b29tIG91dCBwYWdlIHBkZlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpY2tzXG4gICAgICovXG4gICAgem9vbU91dCh0aWNrczogbnVtYmVyKSB7XG4gICAgICAgIGxldCBuZXdTY2FsZTogYW55ID0gdGhpcy5jdXJyZW50U2NhbGU7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIG5ld1NjYWxlID0gKG5ld1NjYWxlIC8gdGhpcy5ERUZBVUxUX1NDQUxFX0RFTFRBKS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgbmV3U2NhbGUgPSBNYXRoLmZsb29yKG5ld1NjYWxlICogMTApIC8gMTA7XG4gICAgICAgICAgICBuZXdTY2FsZSA9IE1hdGgubWF4KHRoaXMuTUlOX1NDQUxFLCBuZXdTY2FsZSk7XG4gICAgICAgIH0gd2hpbGUgKC0tdGlja3MgPiAwICYmIG5ld1NjYWxlID4gdGhpcy5NSU5fU0NBTEUpO1xuICAgICAgICB0aGlzLmN1cnJlbnRTY2FsZU1vZGUgPSAnYXV0byc7XG4gICAgICAgIHRoaXMuc2V0U2NhbGVVcGRhdGVQYWdlcyhuZXdTY2FsZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbG9hZCB0aGUgcHJldmlvdXMgcGFnZVxuICAgICAqL1xuICAgIHByZXZpb3VzUGFnZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucGRmVmlld2VyICYmIHRoaXMucGFnZSA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZS0tO1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5UGFnZSA9IHRoaXMucGFnZTtcblxuICAgICAgICAgICAgdGhpcy5wZGZWaWV3ZXIuY3VycmVudFBhZ2VOdW1iZXIgPSB0aGlzLnBhZ2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBsb2FkIHRoZSBuZXh0IHBhZ2VcbiAgICAgKi9cbiAgICBuZXh0UGFnZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucGRmVmlld2VyICYmIHRoaXMucGFnZSA8IHRoaXMudG90YWxQYWdlcykge1xuICAgICAgICAgICAgdGhpcy5wYWdlKys7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlQYWdlID0gdGhpcy5wYWdlO1xuXG4gICAgICAgICAgICB0aGlzLnBkZlZpZXdlci5jdXJyZW50UGFnZU51bWJlciA9IHRoaXMucGFnZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGxvYWQgdGhlIHBhZ2UgaW4gaW5wdXRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYWdlIC0gcGFnZSB0byBsb2FkXG4gICAgICovXG4gICAgaW5wdXRQYWdlKHBhZ2U6IHN0cmluZykge1xuICAgICAgICBsZXQgcGFnZUlucHV0ID0gcGFyc2VJbnQocGFnZSwgMTApO1xuXG4gICAgICAgIGlmICghaXNOYU4ocGFnZUlucHV0KSAmJiBwYWdlSW5wdXQgPiAwICYmIHBhZ2VJbnB1dCA8PSB0aGlzLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZSA9IHBhZ2VJbnB1dDtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVBhZ2UgPSB0aGlzLnBhZ2U7XG4gICAgICAgICAgICB0aGlzLnBkZlZpZXdlci5jdXJyZW50UGFnZU51bWJlciA9IHRoaXMucGFnZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVBhZ2UgPSB0aGlzLnBhZ2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXRlbmVyIFNjcm9sbCBFdmVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHthbnl9IHRhcmdldFxuICAgICAqL1xuICAgIHdhdGNoU2Nyb2xsKHRhcmdldCkge1xuICAgICAgICBsZXQgb3V0cHV0UGFnZSA9IHRoaXMuZ2V0VmlzaWJsZUVsZW1lbnQodGFyZ2V0KTtcblxuICAgICAgICBpZiAob3V0cHV0UGFnZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlID0gb3V0cHV0UGFnZS5pZDtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVBhZ2UgPSB0aGlzLnBhZ2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBmaW5kIG91dCB3aGF0IGVsZW1lbnRzIGFyZSB2aXNpYmxlIHdpdGhpbiBhIHNjcm9sbCBwYW5lXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2FueX0gdGFyZ2V0XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBwYWdlXG4gICAgICovXG4gICAgZ2V0VmlzaWJsZUVsZW1lbnQodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBkZlZpZXdlci5fcGFnZXMuZmluZCgocGFnZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNPblNjcmVlbihwYWdlLCB0YXJnZXQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjaGVjayBpZiBhIHBhZ2UgaXMgdmlzaWJsZVxuICAgICAqXG4gICAgICogQHBhcmFtIHthbnl9IHBhZ2VcbiAgICAgKiBAcGFyYW0ge2FueX0gdGFyZ2V0XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpc09uU2NyZWVuKHBhZ2U6IGFueSwgdGFyZ2V0OiBhbnkpIHtcbiAgICAgICAgbGV0IHZpZXdwb3J0OiBhbnkgPSB7fTtcbiAgICAgICAgdmlld3BvcnQudG9wID0gdGFyZ2V0LnNjcm9sbFRvcDtcbiAgICAgICAgdmlld3BvcnQuYm90dG9tID0gdmlld3BvcnQudG9wICsgdGFyZ2V0LnNjcm9sbEhlaWdodDtcbiAgICAgICAgbGV0IGJvdW5kczogYW55ID0ge307XG4gICAgICAgIGJvdW5kcy50b3AgPSBwYWdlLmRpdi5vZmZzZXRUb3A7XG4gICAgICAgIGJvdW5kcy5ib3R0b20gPSBib3VuZHMudG9wICsgcGFnZS52aWV3cG9ydC5oZWlnaHQ7XG4gICAgICAgIHJldHVybiAoKGJvdW5kcy50b3AgPD0gdmlld3BvcnQuYm90dG9tKSAmJiAoYm91bmRzLmJvdHRvbSA+PSB2aWV3cG9ydC50b3ApKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTGl0ZW5lciBLZXlib2FyZCBFdmVudFxuICAgICAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcbiAgICAgKi9cbiAgICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDprZXlkb3duJywgWyckZXZlbnQnXSlcbiAgICBoYW5kbGVLZXlib2FyZEV2ZW50KGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIGxldCBrZXkgPSBldmVudC5rZXlDb2RlO1xuICAgICAgICBpZiAoa2V5ID09PSAzOSkgeyAvLyByaWdodCBhcnJvd1xuICAgICAgICAgICAgdGhpcy5uZXh0UGFnZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gMzcpIHsvLyBsZWZ0IGFycm93XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUGFnZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4iXX0=

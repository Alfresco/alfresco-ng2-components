<div id="userinfo_container" *ngIf="isLoggedIn()">
    <button md-button [mdMenuTriggerFor]="menu" class="adf-userinfo-menu_button">
    <div class="button-profile" id="user-profile" data-automation-id="user-profile">
        <img id="logged-user-img" [src]="getUserAvatar()"
             alt="user-info-profile-button"
             (error)="onImageLoadingError($event)" class="profile-image"/>
    </div>
</button>
    <md-menu #menu="mdMenu" [xPosition]="menuPositionX" [yPosition]="menuPositionY" [overlapTrigger]="false" class="adf-userinfo-menu">
        <md-tab-group (click)="stopClosing($event)" class="adf-userinfo-tab">
            <md-tab label="Content Services" *ngIf="ecmUser">
                <md-card class="adf-userinfo-card">
                    <md-card-header class="adf-userinfo-card-header" [style.background-image]="'url(' + ecmBackgroundImage + ')'">
                        <img class="profile-picture"
                            id="ecm-user-detail-image"
                            alt="ecm-profile-image"
                            (error)="onImageLoadingError($event)"
                            [src]="getEcmUserAvatar()" />
                       <h2 class="adf-userinfo-title" id="ecm-username">{{ecmUser.fullNameDisplay}}</h2>
                    </md-card-header>
                    <md-card-content>
                        <div class="adf-userinfo-supporting-text">
                            <md-list>
                                <md-list-item>
                                    <span md-line id="ecm-full-name" class="truncate-long-names">{{ecmUser.fullNameDisplay}}</span>
                                    <p md-line class="adf-userinfo__detail-profile" id="ecm-email"> {{ecmUser.email}} </p>
                                </md-list-item>
                                <md-list-item class="adf-userinfo__detail-profile">
                                    <span md-line class="role-label-user">{{ 'USER_PROFILE.LABELS.ECM.JOB_TITLE' | translate }}</span>
                                    <p md-line> {{ ecmUser.jobTitle ? ecmUser.jobTitle : 'N/A' }} </p>
                                </md-list-item>
                            </md-list>
                        </div>
                    </md-card-content>
                </md-card>
            </md-tab>
            <md-tab label="Process Services" *ngIf="bpmUser">
            <md-card class="adf-userinfo-card">
                <md-card-header class="adf-userinfo-card-header" [style.background-image]="'url(' + bpmBackgroundImage + ')'">
                    <img class="profile-picture"
                        id="bpm-user-detail-image"
                        alt="bpm-profile-image"
                        (error)="onImageLoadingError($event)"
                        [src]="getBpmUserAvatar()"/>
                   <h2 class="adf-userinfo-title" id="bpm-username">{{bpmUser.fullNameDisplay}}</h2>
                </md-card-header>
                <md-card-content>
                    <div class="adf-userinfo-supporting-text">
                        <md-list>
                            <md-list-item>
                                <span md-line id="bpm-full-name" class="truncate-long-names">{{ bpmUser.fullNameDisplay }}</span>
                                <p md-line class="adf-userinfo__detail-profile" id="bpm-email"> {{bpmUser.email}} </p>
                            </md-list-item>
                            <md-list-item class="adf-userinfo__detail-profile">
                                <span md-line id="bpm-tenant" class="role-label-user">{{ 'USER_PROFILE.LABELS.BPM.TENANT' | translate }}</span>
                                <p md-line>{{ bpmUser.tenantName ? bpmUser.tenantName : 'No tenant' }}</p>
                            </md-list-item>
                        </md-list>
                    </div>
                </md-card-content>
            </md-card>
            </md-tab>
        </md-tab-group>

    </md-menu>
</div>

<div class="adf-search-container" *ngIf="isLoggedIn()"
[@transitionMessages]="subscriptAnimationState">
<a mat-icon-button
    *ngIf="expandable"
    id="adf-search-button"
    class="adf-search-button"
    (click)="toggleSearchBar()">
    <mat-icon aria-label="search button">search</mat-icon>
</a>
<mat-form-field class="example-full-width">
  <input matInput class="adf-search-field"
         [type]="inputType"
         [autocomplete]="getAutoComplete()"
         id="adf-control-input"
         [(ngModel)]="searchTerm"
         (ngModelChange)="inputChange($event)"
         [adfSearchAutocomplete]="auto"
         (enterKeyPressed)="searchSubmit($event)">
</mat-form-field>
</div>

<adf-search #auto="adfSearchAutocomplete" class="adf-search-result-autocomplete truncate">
    <ng-template let-data>
        <mat-list *ngIf="isSearchBarActive()" id="autocomplete-search-result-list">
            <mat-option *ngFor="let item of data?.list?.entries; let idx = index" (click)="elementClicked(item)">
                <div id="result_option_{{idx}}" class="adf-search-elements">
                    <mat-icon *ngIf="item">
                        <img [src]="getMimeTypeIcon(item)" />
                    </mat-icon>
                    <span id="result_name_{{idx}}"
                        *ngIf="highlight; else elseBlock"
                        [innerHtml]="item.entry.name | highlight: searchTerm"
                        class="truncate">
                        {{ item?.entry.name }}</span>
                    <ng-template #elseBlock>
                        <span id="result_name_{{idx}}" class="truncate" [innerHtml]="item.entry.name"></span>
                    </ng-template>
                    <!--span> {{item?.entry.createdByUser.displayName}} </span-->
                </div>
            </mat-option>
            <mat-option id="search_no_result" data-automation-id="search_no_result_found" *ngIf="data?.list?.entries.length === 0">
                <span class="truncate"><b> {{ 'SEARCH.RESULTS.NONE' | translate:{searchTerm: searchTerm} }}</b></span>
            </mat-option>
        </mat-list>
    </ng-template>
</adf-search>

/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@angular/core"),require("rxjs/Rx"),require("@angular/material"),require("ng2-alfresco-core"),require("@angular/common"),require("ng2-alfresco-datatable"),require("rxjs/Observable")):"function"==typeof define&&define.amd?define(["@angular/core","rxjs/Rx","@angular/material","ng2-alfresco-core","@angular/common","ng2-alfresco-datatable","rxjs/Observable"],t):"object"==typeof exports?exports["contents-service"]=t(require("@angular/core"),require("rxjs/Rx"),require("@angular/material"),require("ng2-alfresco-core"),require("@angular/common"),require("ng2-alfresco-datatable"),require("rxjs/Observable")):e["contents-service"]=t(e["@angular/core"],e["rxjs/Rx"],e["@angular/material"],e["ng2-alfresco-core"],e["@angular/common"],e["ng2-alfresco-datatable"],e["rxjs/Observable"])}(this,function(e,t,n,i,o,r,s){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=114)}([function(t,n){t.exports=e},function(e,t,n){"use strict";t.a=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},t.b=function(e,t){return function(n,i){t(n,i,e)}};Object.setPrototypeOf||Array,Object.assign},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=i},,,,function(e,t){e.exports=o},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(2));n.n(r);let s=class{constructor(e){this.apiService=e}getRating(e,t){return r.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.getRating(e,t)).map(e=>e).catch(this.handleError)}postRating(e,t,n){let i={id:t,myRating:n};return r.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.rate(e,i)).map(e=>e).catch(this.handleError)}deleteRating(e,t){return r.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.removeRating(e,t)).map(e=>e).catch(this.handleError)}handleError(e){return console.error(e),r.Observable.throw(e||"Server error")}};s=i.a([Object(o.Injectable)()],s)},function(e,t){e.exports=r},,,,,,,,,function(e,t,n){"use strict";function i(){return[s.MatIconModule,s.MatListModule,s.MatButtonModule,s.MatInputModule,s.MatChipsModule,s.MatDialogModule,s.MatRippleModule]}var o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(3);t.modules=i;var a=function(){function e(){}return e=o([r.NgModule({imports:i(),exports:i()})],e)}();t.MaterialModule=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TagService",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(2));n.n(r);let s=class{constructor(e,t){this.apiService=e,this.logService=t,this.refresh=new o.EventEmitter}getTagsByNodeId(e){return r.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.getNodeTags(e)).catch(e=>this.handleError(e))}getAllTheTags(){return r.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.getTags()).catch(e=>this.handleError(e))}addTag(e,t){let n=new(this.apiService.getInstance().core.TagBody);n.tag=t;let i=r.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.addTag(e,n));return i.subscribe(e=>{this.refresh.emit(e)},e=>{this.handleError(e)}),i}removeTag(e,t){let n=r.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.removeTag(e,t));return n.subscribe(e=>{this.refresh.emit(e)},e=>{this.handleError(e)}),n}handleError(e){return this.logService.error(e),r.Observable.throw(e||"Server error")}};i.a([Object(o.Output)()],s.prototype,"refresh",void 0),s=i.a([Object(o.Injectable)()],s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PaginationStrategy",function(){return i}),n.d(t,"DocumentListComponent",function(){return p});var i,o=n(1),r=n(0),s=(n.n(r),n(4)),a=(n.n(s),n(17)),c=(n.n(a),n(2)),l=(n.n(c),n(144)),d=n(43),u=n(29),h=n(45);n.n(h);!function(e){e[e.Finite=0]="Finite",e[e.Infinite=1]="Infinite"}(i||(i={}));let p=f=class{constructor(e,t,o,s,a,l){this.documentListService=e,this.ngZone=t,this.elementRef=o,this.apiService=s,this.appConfig=a,this.preferences=l,this.permissionsStyle=[],this.locationFormat="/",this.navigate=!0,this.navigationMode=f.DOUBLE_CLICK_NAVIGATION,this.thumbnails=!1,this.selectionMode="single",this.multiselect=!1,this.enablePagination=!0,this.contentActions=!1,this.contentActionsPosition="right",this.contextMenuActions=!1,this.pageSize=f.DEFAULT_PAGE_SIZE,this.emptyFolderImageUrl=n(145),this.allowDropFiles=!1,this.loading=!1,this.paginationStrategy=i.Finite,this.infiniteLoading=!1,this.noPermission=!1,this.selection=new Array,this.skipCount=0,this.rowFilter=null,this.imageResolver=null,this.currentFolderId=null,this.folderNode=null,this.node=null,this.nodeClick=new r.EventEmitter,this.nodeDblClick=new r.EventEmitter,this.folderChange=new r.EventEmitter,this.preview=new r.EventEmitter,this.ready=new r.EventEmitter,this.error=new r.EventEmitter,this.actions=[],this.contextActionHandler=new c.Subject,this.layoutPresets={},this.currentNodeAllowableOperations=[],this.CREATE_PERMISSION="create",this.defaultPageSizes=[5,10,15,20],this.supportedPageSizes=a.get("document-list.supportedPageSizes",this.defaultPageSizes)}getContextActions(e){if(e&&e.entry){let t=this.getNodeActions(e);if(t&&t.length>0)return t.map(t=>({model:t,node:e,subject:this.contextActionHandler}))}return null}contextActionCallback(e){e&&this.executeContentAction(e.node,e.model)}get hasCustomLayout(){return this.columnList&&this.columnList.columns&&this.columnList.columns.length>0}getDefaultPageSize(){let e=this.preferences.paginationSize;const t=this.supportedPageSizes||this.defaultPageSizes;return t&&t.length>0&&t.indexOf(e)<0&&(e=t[0]),e}ngOnInit(){this.pageSize=this.getDefaultPageSize(),this.loadLayoutPresets(),this.data=new d.ShareDataTableAdapter(this.documentListService,null,this.getDefaultSorting()),this.data.thumbnails=this.thumbnails,this.data.permissionsStyle=this.permissionsStyle,this.rowFilter&&this.data.setFilter(this.rowFilter),this.imageResolver&&this.data.setImageResolver(this.imageResolver),this.contextActionHandler.subscribe(e=>this.contextActionCallback(e)),this.enforceSingleClickNavigationForMobile()}ngAfterContentInit(){let e=[];this.hasCustomLayout&&(e=this.columnList.columns.map(e=>e)),this.data?e&&e.length>0&&this.data.setColumns(e):this.data=new d.ShareDataTableAdapter(this.documentListService,e,this.getDefaultSorting());let t=this.data.getColumns();t&&0!==t.length||this.setupDefaultColumns(this.currentFolderId)}ngOnChanges(e){e.folderNode&&e.folderNode.currentValue?this.loadFolder():e.currentFolderId&&e.currentFolderId.currentValue?(e.currentFolderId.previousValue!==e.currentFolderId.currentValue&&(this.resetPagination(),this.folderNode=null),this.hasCustomLayout||this.setupDefaultColumns(e.currentFolderId.currentValue),this.loadFolderByNodeId(e.currentFolderId.currentValue)):this.data&&(e.node&&e.node.currentValue?(this.resetSelection(),this.data.loadPage(e.node.currentValue)):e.rowFilter?(this.data.setFilter(e.rowFilter.currentValue),this.currentFolderId&&this.loadFolderNodesByFolderNodeId(this.currentFolderId,this.pageSize,this.skipCount)):e.imageResolver&&this.data.setImageResolver(e.imageResolver.currentValue))}reload(e=!1){this.ngZone.run(()=>{this.resetSelection(),this.folderNode?this.loadFolder(e):this.currentFolderId?this.loadFolderByNodeId(this.currentFolderId):this.node&&(this.data.loadPage(this.node),this.ready.emit())})}isEmptyTemplateDefined(){return!(!this.dataTable||!this.emptyFolderTemplate)}isNoPermissionTemplateDefined(){return!(!this.dataTable||!this.noPermissionTemplate)}isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}isEmpty(){return!this.data||0===this.data.getRows().length}isPaginationEnabled(){return this.enablePagination&&!this.isEmpty()}isPaginationNeeded(){return this.paginationStrategy===i.Finite}getNodeActions(e){let t=null;if(e&&e.entry&&(e.entry.isFile&&(t="document"),e.entry.isFolder&&(t="folder"),t)){let n=t.toLowerCase(),i=this.actions.filter(e=>e.target.toLowerCase()===n).map(e=>new u.ContentActionModel(e));return i.forEach(t=>{this.checkPermission(e,t)}),i}return[]}checkPermission(e,t){if(t.permission&&this.hasPermissions(e)){e.entry.allowableOperations.find(e=>e===t.permission)||!0!==t.disableWithNoPermission||(t.disabled=!0)}return t}hasPermissions(e){return!!e.entry.allowableOperations}onShowContextMenu(e){e&&this.contextMenuActions&&e.preventDefault()}performNavigation(e){return!!this.canNavigateFolder(e)&&(this.currentFolderId=e.entry.id,this.folderNode=e.entry,this.skipCount=0,this.currentNodeAllowableOperations=e.entry.allowableOperations?e.entry.allowableOperations:[],this.loadFolder(),this.folderChange.emit(new h.NodeEntryEvent(e.entry)),!0)}executeContentAction(e,t){if(e&&e.entry&&t){let n;n="function"==typeof t.handler?t.handler(e,this,t.permission):c.Observable.of(!0),"function"==typeof t.execute&&n.subscribe(()=>{t.execute(e)})}}loadFolder(e=!1){e?this.infiniteLoading=!0:this.loading=!0;let t=this.folderNode?this.folderNode.id:this.currentFolderId;t&&this.loadFolderNodesByFolderNodeId(t,this.pageSize,this.skipCount,e).catch(e=>this.error.emit(e))}loadFolderByNodeId(e){this.loading=!0,this.resetSelection(),"-trashcan-"===e?this.loadTrashcan():"-sharedlinks-"===e?this.loadSharedLinks():"-sites-"===e?this.loadSites():"-mysites-"===e?this.loadMemberSites():"-favorites-"===e?this.loadFavorites():"-recent-"===e?this.loadRecent():this.documentListService.getFolderNode(e).then(e=>(this.folderNode=e,this.currentFolderId=e.id,this.skipCount=0,this.currentNodeAllowableOperations=e.allowableOperations?e.allowableOperations:[],this.loadFolderNodesByFolderNodeId(e.id,this.pageSize,this.skipCount))).catch(e=>{403===JSON.parse(e.message).error.statusCode&&(this.loading=!1,this.noPermission=!0),this.error.emit(e)})}loadFolderNodesByFolderNodeId(e,t,n,i=!1){return new Promise((o,r)=>{this.resetSelection(),this.documentListService.getFolder(null,{maxItems:t,skipCount:n,rootFolderId:e}).subscribe(s=>{this.isCurrentPageEmpty(s,n)?(this.updateSkipCount(n-t),this.loadFolderNodesByFolderNodeId(e,t,n-t).then(()=>o(!0),e=>r(e))):(this.data.loadPage(s,i),this.pagination=s.list.pagination,this.loading=!1,this.infiniteLoading=!1,this.ready.emit(),o(!0))},e=>{r(e)})})}resetSelection(){this.dataTable.resetSelection(),this.selection=[]}resetPagination(){this.skipCount=0}loadTrashcan(){const e={include:["path","properties"],maxItems:this.pageSize,skipCount:this.skipCount};this.apiService.nodesApi.getDeletedNodes(e).then(e=>this.onPageLoaded(e)).catch(e=>this.error.emit(e))}loadSharedLinks(){const e={include:["properties","allowableOperations","path"],maxItems:this.pageSize,skipCount:this.skipCount};this.apiService.sharedLinksApi.findSharedLinks(e).then(e=>this.onPageLoaded(e)).catch(e=>this.error.emit(e))}loadSites(){const e={include:["properties"],maxItems:this.pageSize,skipCount:this.skipCount};this.apiService.sitesApi.getSites(e).then(e=>this.onPageLoaded(e)).catch(e=>this.error.emit(e))}loadMemberSites(){const e={include:["properties"],maxItems:this.pageSize,skipCount:this.skipCount};this.apiService.peopleApi.getSiteMembership("-me-",e).then(e=>{let t={list:{entries:e.list.entries.map(({entry:{site:e}})=>({entry:e})),pagination:e.list.pagination}};this.onPageLoaded(t)}).catch(e=>this.error.emit(e))}loadFavorites(){const e={maxItems:this.pageSize,skipCount:this.skipCount,where:"(EXISTS(target/file) OR EXISTS(target/folder))",include:["properties","allowableOperations","path"]};this.apiService.favoritesApi.getFavorites("-me-",e).then(e=>{let t={list:{entries:e.list.entries.map(({entry:{target:e}})=>({entry:e.file||e.folder})).map(({entry:e})=>(e.properties={"cm:title":e.title,"cm:description":e.description},{entry:e})),pagination:e.list.pagination}};this.onPageLoaded(t)}).catch(e=>this.error.emit(e))}loadRecent(){this.apiService.peopleApi.getPerson("-me-").then(e=>{const t=e.entry.id,n={query:{query:"*",language:"afts"},filterQueries:[{query:"cm:modified:[NOW/DAY-30DAYS TO NOW/DAY+1DAY]"},{query:`cm:modifier:${t} OR cm:creator:${t}`},{query:'TYPE:"content" AND -TYPE:"app:filelink" AND -TYPE:"fm:post"'}],include:["path","properties","allowableOperations"],sort:[{type:"FIELD",field:"cm:modified",ascending:!1}],paging:{maxItems:this.pageSize,skipCount:this.skipCount}};return this.apiService.searchApi.search(n)}).then(e=>this.onPageLoaded(e)).catch(e=>this.error.emit(e))}onPageLoaded(e){e&&(this.data.loadPage(e),this.pagination=e.list.pagination,this.loading=!1,this.ready.emit())}isCurrentPageEmpty(e,t){return!this.hasNodeEntries(e)&&this.hasPages(t)}hasPages(e){return e>0&&this.isPaginationEnabled()}hasNodeEntries(e){return e&&e.list&&e.list.entries&&e.list.entries.length>0}setupDefaultColumns(e="default"){if(this.data){const t=this.getLayoutPreset(e);this.data.setColumns(t)}}onPreviewFile(e){e&&this.preview.emit(new h.NodeEntityEvent(e))}onNodeClick(e){const t=new CustomEvent("node-click",{detail:{sender:this,node:e},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t);const n=new h.NodeEntityEvent(e);this.nodeClick.emit(n),n.defaultPrevented||this.navigate&&this.navigationMode===f.SINGLE_CLICK_NAVIGATION&&e&&e.entry&&(e.entry.isFile&&this.onPreviewFile(e),e.entry.isFolder&&this.performNavigation(e))}onNodeDblClick(e){const t=new CustomEvent("node-dblclick",{detail:{sender:this,node:e},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t);const n=new h.NodeEntityEvent(e);this.nodeDblClick.emit(n),n.defaultPrevented||this.navigate&&this.navigationMode===f.DOUBLE_CLICK_NAVIGATION&&e&&e.entry&&(e.entry.isFile&&this.onPreviewFile(e),e.entry.isFolder&&this.performNavigation(e))}onNodeSelect(e){this.selection=e.selection.map(e=>e.node);const t=new CustomEvent("node-select",{detail:{node:e.row.node,selection:this.selection},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t)}onNodeUnselect(e){this.selection=e.selection.map(e=>e.node);const t=new CustomEvent("node-unselect",{detail:{node:e.row.node,selection:this.selection},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t)}onShowRowContextMenu(e){if(this.contextMenuActions){let t=e.value,n=t.row.node;n&&(t.actions=this.getContextActions(n)||[])}}onShowRowActionsMenu(e){if(this.contentActions){let t=e.value,n=t.row.node;n&&(t.actions=this.getNodeActions(n)||[])}}onExecuteRowAction(e){if(this.contentActions){let t=e.value,n=t.row.node,i=t.action;this.executeContentAction(n,i)}}onChangePageSize(e){this.preferences.paginationSize=e.maxItems,this.pageSize=e.maxItems,this.skipCount=0,this.reload()}onChangePageNumber(e){this.pageSize=e.maxItems,this.skipCount=e.skipCount,this.reload()}onNextPage(e){this.skipCount=e.skipCount,this.reload()}loadNextBatch(e){this.skipCount=e.skipCount,this.reload(!0)}onPrevPage(e){this.skipCount=e.skipCount,this.reload()}enforceSingleClickNavigationForMobile(){this.isMobile()&&(this.navigationMode=f.SINGLE_CLICK_NAVIGATION)}getDefaultSorting(){let e;if(this.sorting){const[t,n]=this.sorting;e=new a.DataSorting(t,n)}return e}canNavigateFolder(e){return!this.isCustomSource(this.currentFolderId)&&!!(e&&e.entry&&e.entry.isFolder)}isCustomSource(e){return["-trashcan-","-sharedlinks-","-sites-","-mysites-","-favorites-","-recent-"].indexOf(e)>-1}updateSkipCount(e){this.skipCount=e}hasCurrentNodePermission(e){let t=!1;if(this.currentNodeAllowableOperations.length>0){t=!!this.currentNodeAllowableOperations.find(t=>t===e)}return t}hasCreatePermission(){return this.hasCurrentNodePermission(this.CREATE_PERMISSION)}loadLayoutPresets(){const e=this.appConfig.get("document-list.presets",null);this.layoutPresets=e?Object.assign({},l.a,e):l.a}getLayoutPreset(e="default"){return(this.layoutPresets[e]||this.layoutPresets.default).map(e=>new a.ObjectDataColumn(e))}};p.SINGLE_CLICK_NAVIGATION="click",p.DOUBLE_CLICK_NAVIGATION="dblclick",p.DEFAULT_PAGE_SIZE=20,o.a([Object(r.ContentChild)(s.DataColumnListComponent)],p.prototype,"columnList",void 0),o.a([Object(r.Input)()],p.prototype,"permissionsStyle",void 0),o.a([Object(r.Input)()],p.prototype,"locationFormat",void 0),o.a([Object(r.Input)()],p.prototype,"navigate",void 0),o.a([Object(r.Input)()],p.prototype,"navigationMode",void 0),o.a([Object(r.Input)()],p.prototype,"thumbnails",void 0),o.a([Object(r.Input)()],p.prototype,"selectionMode",void 0),o.a([Object(r.Input)()],p.prototype,"multiselect",void 0),o.a([Object(r.Input)()],p.prototype,"enablePagination",void 0),o.a([Object(r.Input)()],p.prototype,"contentActions",void 0),o.a([Object(r.Input)()],p.prototype,"contentActionsPosition",void 0),o.a([Object(r.Input)()],p.prototype,"contextMenuActions",void 0),o.a([Object(r.Input)()],p.prototype,"pageSize",void 0),o.a([Object(r.Input)()],p.prototype,"emptyFolderImageUrl",void 0),o.a([Object(r.Input)()],p.prototype,"allowDropFiles",void 0),o.a([Object(r.Input)()],p.prototype,"sorting",void 0),o.a([Object(r.Input)()],p.prototype,"rowStyle",void 0),o.a([Object(r.Input)()],p.prototype,"rowStyleClass",void 0),o.a([Object(r.Input)()],p.prototype,"loading",void 0),o.a([Object(r.Input)()],p.prototype,"paginationStrategy",void 0),o.a([Object(r.Input)()],p.prototype,"supportedPageSizes",void 0),o.a([Object(r.Input)()],p.prototype,"rowFilter",void 0),o.a([Object(r.Input)()],p.prototype,"imageResolver",void 0),o.a([Object(r.Input)()],p.prototype,"currentFolderId",void 0),o.a([Object(r.Input)()],p.prototype,"folderNode",void 0),o.a([Object(r.Input)()],p.prototype,"node",void 0),o.a([Object(r.Output)()],p.prototype,"nodeClick",void 0),o.a([Object(r.Output)()],p.prototype,"nodeDblClick",void 0),o.a([Object(r.Output)()],p.prototype,"folderChange",void 0),o.a([Object(r.Output)()],p.prototype,"preview",void 0),o.a([Object(r.Output)()],p.prototype,"ready",void 0),o.a([Object(r.Output)()],p.prototype,"error",void 0),o.a([Object(r.ViewChild)(a.DataTableComponent)],p.prototype,"dataTable",void 0),o.a([Object(r.HostListener)("contextmenu",["$event"])],p.prototype,"onShowContextMenu",null),p=f=o.a([Object(r.Component)({selector:"adf-document-list",styles:[n(146)],template:n(148),encapsulation:r.ViewEncapsulation.None})],p);var f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.disableWithNoPermission=!1,this.disabled=!1,e&&(this.icon=e.icon,this.title=e.title,this.handler=e.handler,this.execute=e.execute,this.target=e.target,this.permission=e.permission,this.disableWithNoPermission=e.disableWithNoPermission,this.disabled=e.disabled)}}t.ContentActionModel=i;class o extends i{constructor(e){super(e),this.target="document"}}t.DocumentActionModel=o;class r extends i{constructor(e){super(e),this.target="folder"}}t.FolderActionModel=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){e&&(this.type=e.type||null,this.action=e.action||null,this.permission=e.permission||null)}}t.PermissionModel=i},,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(16));let s=class{constructor(e){this.ratingService=e,this.average=0,this.ratingType="fiveStar",this.changeVote=new o.EventEmitter,this.stars=[]}ngOnChanges(){let e=this.ratingService.getRating(this.nodeId,this.ratingType);return e.subscribe(e=>{e.entry.aggregate&&(this.average=e.entry.aggregate.average,this.calculateStars())}),e}calculateStars(){this.stars=[];for(let e=0;e<5;e++)e<this.average?this.stars.push({fill:!0}):this.stars.push({fill:!1});this.changeVote.emit(this.average)}updateVote(e){this.ratingService.postRating(this.nodeId,this.ratingType,e).subscribe(e=>{e.entry.aggregate&&this.average!==e.entry.aggregate.average&&(this.average=e.entry.aggregate.average,this.calculateStars())})}};i.a([Object(o.Input)()],s.prototype,"nodeId",void 0),i.a([Object(o.Output)()],s.prototype,"changeVote",void 0),s=i.a([Object(o.Component)({selector:"adf-rating",styles:[n(117)],template:n(119),providers:[r.a],encapsulation:o.ViewEncapsulation.None})],s)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(16));let s=class{constructor(e){this.ratingService=e,this.likesCounter=0,this.ratingType="likes",this.isLike=!1,this.changeVote=new o.EventEmitter}ngOnChanges(){this.clean();let e=this.ratingService.getRating(this.nodeId,this.ratingType);return e.subscribe(e=>{e.entry.aggregate&&(this.likesCounter=e.entry.aggregate.numberOfRatings,e.entry.ratedAt&&(this.isLike=!0))}),e}likeClick(){this.isLike?this.ratingService.deleteRating(this.nodeId,this.ratingType).subscribe(()=>{this.likesCounter-=1,this.isLike=!1}):this.ratingService.postRating(this.nodeId,this.ratingType,!0).subscribe(e=>{this.likesCounter=e.entry.aggregate.numberOfRatings,this.isLike=!0}),this.changeVote.emit(this.likesCounter)}clean(){this.isLike=!1,this.likesCounter=0}};i.a([Object(o.Input)()],s.prototype,"nodeId",void 0),i.a([Object(o.Output)()],s.prototype,"changeVote",void 0),s=i.a([Object(o.Component)({selector:"adf-like",styles:[n(120)],template:n(122),providers:[r.a],encapsulation:o.ViewEncapsulation.None})],s)},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(4),a=n(27),c=function(){function e(e,t){var n=this;this.tagService=e,this.translateService=t,this.successAdd=new r.EventEmitter,this.error=new r.EventEmitter,this.result=new r.EventEmitter,this.disableAddTag=!0,this.tagService.refresh.subscribe(function(){n.refreshTag()})}return e.prototype.ngOnChanges=function(){return this.refreshTag()},e.prototype.refreshTag=function(){var e=this;this.tagService.getTagsByNodeId(this.nodeId).subscribe(function(t){e.tagsEntries=t.list.entries,e.disableAddTag=!1,e.result.emit(e.tagsEntries)},function(){e.tagsEntries=null,e.disableAddTag=!0,e.result.emit(e.tagsEntries)})},e.prototype.addTag=function(){var e=this;this.searchTag(this.newTagName)?(this.translateService.get("TAG.MESSAGES.EXIST").subscribe(function(t){e.errorMsg=t}),this.error.emit(this.errorMsg)):this.tagService.addTag(this.nodeId,this.newTagName).subscribe(function(){e.newTagName="",e.successAdd.emit(e.nodeId)})},e.prototype.searchTag=function(e){if(this.tagsEntries)return this.tagsEntries.find(function(t){return e===t.entry.tag})},e.prototype.cleanErrorMsg=function(){this.errorMsg=""},e.prototype.removeTag=function(e){this.tagService.removeTag(this.nodeId,e)},i([r.Input(),o("design:type",String)],e.prototype,"nodeId",void 0),i([r.Output(),o("design:type","function"==typeof(t=void 0!==r.EventEmitter&&r.EventEmitter)&&t||Object)],e.prototype,"successAdd",void 0),i([r.Output(),o("design:type","function"==typeof(c=void 0!==r.EventEmitter&&r.EventEmitter)&&c||Object)],e.prototype,"error",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"result",void 0),e=i([r.Component({selector:"adf-tag-node-actions-list",template:n(126),styles:[n(127)],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",["function"==typeof(l=void 0!==a.TagService&&a.TagService)&&l||Object,"function"==typeof(d=void 0!==s.AlfrescoTranslationService&&s.AlfrescoTranslationService)&&d||Object])],e);var t,c,l,d}();t.TagActionsComponent=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TagListComponent",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e){this.tagService=e,this.result=new o.EventEmitter,this.tagService.refresh.subscribe(()=>{this.refreshTag()})}ngOnInit(){return this.refreshTag()}refreshTag(){this.tagService.getAllTheTags().subscribe(e=>{this.tagsEntries=e.list.entries,this.result.emit(this.tagsEntries)})}};i.a([Object(o.Output)()],r.prototype,"result",void 0),r=i.a([Object(o.Component)({selector:"adf-tag-list",template:n(129),styles:[n(130)],encapsulation:o.ViewEncapsulation.None})],r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TagNodeListComponent",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e){this.tagService=e,this.results=new o.EventEmitter,this.tagService.refresh.subscribe(()=>{this.refreshTag()})}ngOnChanges(){return this.refreshTag()}refreshTag(){this.tagService.getTagsByNodeId(this.nodeId).subscribe(e=>{this.tagsEntries=e.list.entries,this.results.emit(this.tagsEntries)})}removeTag(e){this.tagService.removeTag(this.nodeId,e).subscribe(()=>{this.refreshTag()})}};i.a([Object(o.Input)()],r.prototype,"nodeId",void 0),i.a([Object(o.Output)()],r.prototype,"results",void 0),r=i.a([Object(o.Component)({selector:"adf-tag-node-list",template:n(132),styles:[n(133)],encapsulation:o.ViewEncapsulation.None})],r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"WebscriptComponent",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(17));n.n(r);let s=class{constructor(e,t){this.apiService=e,this.logService=t,this.showData=!0,this.contextRoot="alfresco",this.servicePath="service",this.contentType="TEXT",this.success=new o.EventEmitter,this.data=void 0,this.showError=!1}ngOnChanges(e){return this.showData&&this.clean(),new Promise((e,t)=>{this.apiService.getInstance().webScript.executeWebScript("GET",this.scriptPath,this.scriptArgs,this.contextRoot,this.servicePath).then(t=>{this.data=t,this.showData&&"DATATABLE"===this.contentType&&(this.data=this.showDataAsDataTable(t)),this.success.emit(this.data),e()},e=>{this.logService.log("Error"+e),t()})})}showDataAsDataTable(e){try{e.schema||(e.schema=r.ObjectDataTableAdapter.generateSchema(e.data)),e.schema&&e.schema.length>0&&(this.data=new r.ObjectDataTableAdapter(e.data,e.schema))}catch(e){this.logService.error("error during the cast as datatable")}return null}clean(){this.data=void 0}isDataTableContent(){return"DATATABLE"===this.contentType}};i.a([Object(o.Input)()],s.prototype,"scriptPath",void 0),i.a([Object(o.Input)()],s.prototype,"scriptArgs",void 0),i.a([Object(o.Input)()],s.prototype,"showData",void 0),i.a([Object(o.Input)()],s.prototype,"contextRoot",void 0),i.a([Object(o.Input)()],s.prototype,"servicePath",void 0),i.a([Object(o.Input)()],s.prototype,"contentType",void 0),i.a([Object(o.Output)()],s.prototype,"success",void 0),s=i.a([Object(o.Component)({selector:"adf-webscript-get",template:n(138)})],s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=(n.n(i),n(4)),r=(n.n(o),n(17)),s=(n.n(r),n(44));n.n(s);class a{constructor(e,t=[],n){this.documentListService=e,this.ERR_ROW_NOT_FOUND="Row not found",this.ERR_COL_NOT_FOUND="Column not found",this.thumbnails=!1,this.rows=[],this.columns=t||[],this.sorting=n}getRows(){return this.rows}setRows(e){this.rows=e||[],this.sort()}getColumns(){return this.columns}setColumns(e){this.columns=e||[]}getValue(e,t){if(!e)throw new Error(this.ERR_ROW_NOT_FOUND);if(!t)throw new Error(this.ERR_COL_NOT_FOUND);let n=e,i=e.getValue(t.key);if(void 0!==n.cache[t.key])return n.cache[t.key];if("date"===t.type)try{const e=this.formatDate(t,i);return n.cacheValue(t.key,e)}catch(e){return console.error(`Error parsing date ${i} to format ${t.format}`),"Error"}if("$thumbnail"===t.key){if(this.imageResolver){let n=this.imageResolver(e,t);if(n)return n}const n=e.node;if(n.entry.isFolder)return this.documentListService.getMimeTypeIcon("folder");if(n.entry.isFile&&this.thumbnails)return this.documentListService.getDocumentThumbnailUrl(n);if(n.entry.content){const e=n.entry.content.mimeType;if(e)return this.documentListService.getMimeTypeIcon(e)}return this.documentListService.getDefaultMimeTypeIcon()}if("image"===t.type&&this.imageResolver){let n=this.imageResolver(e,t);if(n)return n}return n.cacheValue(t.key,i)}formatDate(e,t){if("date"===e.type){const n=e.format||"medium";if("timeAgo"===n){return(new o.TimeAgoPipe).transform(t)}return new i.DatePipe("en-US").transform(t,n)}return t}getSorting(){return this.sorting}setSorting(e){this.sorting=e,this.sortRows(this.rows,this.sorting)}sort(e,t){let n=this.sorting||new r.DataSorting;e&&(n.key=e,n.direction=t||"asc"),this.setSorting(n)}setFilter(e){this.filter=e}setImageResolver(e){this.imageResolver=e}sortRows(e,t){const n={};t&&t.key&&e&&e.length>0&&((t.key.includes("sizeInBytes")||"name"===t.key)&&(n.numeric=!0),e.sort((e,i)=>{if(e.node.entry.isFolder!==i.node.entry.isFolder)return e.node.entry.isFolder?-1:1;let o=e.getValue(t.key);o=o?o instanceof Date?o.valueOf().toString():o.toString():"";let r=i.getValue(t.key);return r=r?r instanceof Date?r.valueOf().toString():r.toString():"","asc"===t.direction?o.localeCompare(r,void 0,n):r.localeCompare(o,void 0,n)}))}loadPage(e,t=!1){this.page=e;let n=[];if(e&&e.list){let t=e.list.entries;if(t&&t.length>0&&(n=t.map(e=>new s.ShareDataRow(e,this.documentListService,this.permissionsStyle)),this.filter&&(n=n.filter(this.filter)),this.columns&&this.columns.length>0)){let e=this.getSorting();if(e)this.sortRows(n,e);else{let e=this.columns.filter(e=>e.sortable);e.length>0?this.sort(e[0].key,"asc"):this.sort(this.columns[0].key,"asc")}}}this.rows=t?this.rows.concat(n):n}}t.ShareDataTableAdapter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=function(){function e(t,n,i){if(this.obj=t,this.documentListService=n,this.permissionsStyle=i,this.cache={},this.isSelected=!1,this.cssClass="",!t)throw new Error(e.ERR_OBJECT_NOT_FOUND);this.isDropTarget=this.isFolderAndHasPermissionToUpload(t),i&&(this.cssClass=this.getPermissionClass(t))}return Object.defineProperty(e.prototype,"node",{get:function(){return this.obj},enumerable:!0,configurable:!0}),e.prototype.getPermissionClass=function(e){var t=this,n="";return this.permissionsStyle.forEach(function(i){(t.applyPermissionStyleToFolder(e.entry,i)||t.applyPermissionStyleToFile(e.entry,i))&&t.documentListService.hasPermission(e.entry,i.permission)&&(n+=" "+i.css)}),n},e.prototype.applyPermissionStyleToFile=function(e,t){return t.isFile&&e.isFile},e.prototype.applyPermissionStyleToFolder=function(e,t){return t.isFolder&&e.isFolder},e.prototype.isFolderAndHasPermissionToUpload=function(e){return this.isFolder(e)&&this.documentListService.hasPermission(e.entry,"create")},e.prototype.isFolder=function(e){return e.entry&&e.entry.isFolder},e.prototype.cacheValue=function(e,t){return this.cache[e]=t,t},e.prototype.getValue=function(e){return void 0!==this.cache[e]?this.cache[e]:i.ObjectUtils.getValue(this.obj.entry,e)},e.prototype.hasValue=function(e){return void 0!==this.getValue(e)},e.ERR_OBJECT_NOT_FOUND="Object source not found",e}();t.ShareDataRow=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=function(e){function t(t){var n=e.call(this)||this;return n.value=t,n}return i(t,e),t}(o.BaseEvent);t.NodeEntityEvent=r;var s=function(e){function t(t){var n=e.call(this)||this;return n.value=t,n}return i(t,e),t}(o.BaseEvent);t.NodeEntryEvent=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DocumentActionsService",function(){return c});var i=n(1),o=n(0),r=(n.n(o),n(152)),s=(n.n(r),n(2)),a=(n.n(s),n(30));let c=class{constructor(e,t,n){this.nodeActionsService=e,this.documentListService=t,this.contentService=n,this.permissionEvent=new s.Subject,this.error=new s.Subject,this.success=new s.Subject,this.handlers={},this.setupActionHandlers()}getHandler(e){if(e){let t=e.toLowerCase();return this.handlers[t]||null}return null}setHandler(e,t){if(e){let n=e.toLowerCase();return this.handlers[n]=t,!0}return!1}canExecuteAction(e){return this.documentListService&&e&&!0===e.entry.isFile}setupActionHandlers(){this.handlers.download=this.download.bind(this),this.handlers.copy=this.copyNode.bind(this),this.handlers.move=this.moveNode.bind(this),this.handlers.delete=this.deleteNode.bind(this)}download(e){if(this.canExecuteAction(e)&&this.contentService){let t=document.createElement("a");return document.body.appendChild(t),t.setAttribute("download","download"),t.href=this.contentService.getContentUrl(e),t.click(),document.body.removeChild(t),r.Observable.of(!0)}return r.Observable.of(!1)}copyNode(e,t,n){const i=this.nodeActionsService.copyContent(e.entry,n);return this.prepareHandlers(i,"content","copy",t,n),i}moveNode(e,t,n){const i=this.nodeActionsService.moveContent(e.entry,n);return this.prepareHandlers(i,"content","move",t,n),i}prepareHandlers(e,t,n,i,o){e.subscribe(e=>{i&&"function"==typeof i.reload&&i.reload(),this.success.next(e)},this.error.next.bind(this.error))}deleteNode(e,t,n){let i;if(this.canExecuteAction(e))return this.contentService.hasPermission(e.entry,n)?((i=this.documentListService.deleteNode(e.entry.id)).subscribe(()=>{t&&"function"==typeof t.reload&&t.reload(),this.success.next(e.entry.id)}),i):(this.permissionEvent.next(new a.PermissionModel({type:"content",action:"delete",permission:n})),r.Observable.throw(new Error("No permission to delete")))}};c=i.a([Object(o.Injectable)()],c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"FolderActionsService",function(){return a});var i=n(1),o=n(0),r=(n.n(o),n(2)),s=(n.n(r),n(30));let a=class{constructor(e,t,n){this.nodeActionsService=e,this.documentListService=t,this.contentService=n,this.permissionEvent=new r.Subject,this.error=new r.Subject,this.success=new r.Subject,this.handlers={},this.setupActionHandlers()}getHandler(e){if(e){let t=e.toLowerCase();return this.handlers[t]||null}return null}setHandler(e,t){if(e){let n=e.toLowerCase();return this.handlers[n]=t,!0}return!1}canExecuteAction(e){return this.documentListService&&e&&!0===e.entry.isFolder}setupActionHandlers(){this.handlers.copy=this.copyNode.bind(this),this.handlers.move=this.moveNode.bind(this),this.handlers.delete=this.deleteNode.bind(this)}copyNode(e,t,n){const i=this.nodeActionsService.copyFolder(e.entry,n);return this.prepareHandlers(i,"folder","copy",t,n),i}moveNode(e,t,n){const i=this.nodeActionsService.moveFolder(e.entry,n);return this.prepareHandlers(i,"folder","move",t,n),i}prepareHandlers(e,t,n,i,o){e.subscribe(e=>{i&&"function"==typeof i.reload&&i.reload(),this.success.next(e)},this.error.next.bind(this.error))}deleteNode(e,t,n){let i;if(this.canExecuteAction(e))return this.contentService.hasPermission(e.entry,n)?((i=this.documentListService.deleteNode(e.entry.id)).subscribe(()=>{t&&"function"==typeof t.reload&&t.reload(),this.success.next(e.entry.id)}),i):(this.permissionEvent.next(new s.PermissionModel({type:"folder",action:"delete",permission:n})),r.Observable.throw(new Error("No permission to delete")))}};a=i.a([Object(o.Injectable)()],a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ContentActionListComponent",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e){this.documentList=e}registerAction(e){return!(!this.documentList||!e)&&(this.documentList.actions.push(e),!0)}};r=i.a([Object(o.Component)({selector:"content-actions",template:""})],r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ContentNodeSelectorComponent",function(){return c});var i=n(1),o=n(0),r=(n.n(o),n(3)),s=(n.n(r),n(4)),a=(n.n(s),n(28));let c=class{constructor(e,t,n,i){this.contentNodeSelectorService=e,this.contentService=t,this.containingDialog=i,this.nodes=null,this.searchTerm="",this.showingSearchResults=!1,this.loadingSearchResults=!1,this.inDialog=!1,this.chosenNode=null,this.folderIdToShow=null,this.skipCount=0,this.currentFolderId=null,this.rowFilter=null,this.imageResolver=null,this.pageSize=10,this.select=new o.EventEmitter,n&&(this.title=n.title,this.select=n.select,this.currentFolderId=n.currentFolderId,this.rowFilter=n.rowFilter,this.imageResolver=n.imageResolver),this.containingDialog&&(this.inDialog=!0)}ngOnInit(){this.folderIdToShow=this.currentFolderId,this.paginationStrategy=a.PaginationStrategy.Infinite}siteChanged(e){this.siteId=e.guid,this.updateResults()}search(e){this.searchTerm=e,this.updateResults()}needBreadcrumbs(){const e=!this.showingSearchResults,t=this.showingSearchResults&&this.chosenNode;return e||t}get breadcrumbFolderNode(){return this.showingSearchResults&&this.chosenNode?this.chosenNode:this.documentList.folderNode}clear(){this.searchTerm="",this.nodes=null,this.skipCount=0,this.chosenNode=null,this.showingSearchResults=!1,this.folderIdToShow=this.currentFolderId}updateResults(){0===this.searchTerm.length?this.folderIdToShow=this.siteId||this.currentFolderId:this.startNewSearch()}startNewSearch(){this.nodes=null,this.skipCount=0,this.chosenNode=null,this.folderIdToShow=null,this.querySearch()}getNextPageOfSearch(e){this.skipCount=e.skipCount,this.querySearch()}querySearch(){this.isSearchTermLongEnough()&&(this.loadingSearchResults=!0,this.contentNodeSelectorService.search(this.searchTerm,this.siteId,this.skipCount,this.pageSize).subscribe(this.showSearchResults.bind(this)))}showSearchResults(e){this.showingSearchResults=!0,this.loadingSearchResults=!1,this.nodes?this.documentList.data.loadPage(e,!0):this.nodes=e,this.pagination=e.list.pagination,this.highlight()}isSearchTermLongEnough(){return this.searchTerm.length>3}highlight(){setTimeout(()=>{this.highlighter.highlight(this.searchTerm)},0)}onNodeSelect(e){this.attemptNodeSelection(e.detail.node.entry)}onFolderChange(){this.showingSearchResults=!1}onFolderLoaded(){this.attemptNodeSelection(this.documentList.folderNode)}attemptNodeSelection(e){this.contentService.hasPermission(e,"create")?this.chosenNode=e:this.resetChosenNode()}resetChosenNode(){this.chosenNode=null}choose(){this.select.next([this.chosenNode])}close(){this.containingDialog.close()}};i.a([Object(o.Input)()],c.prototype,"title",void 0),i.a([Object(o.Input)()],c.prototype,"currentFolderId",void 0),i.a([Object(o.Input)()],c.prototype,"rowFilter",void 0),i.a([Object(o.Input)()],c.prototype,"imageResolver",void 0),i.a([Object(o.Input)()],c.prototype,"pageSize",void 0),i.a([Object(o.Output)()],c.prototype,"select",void 0),i.a([Object(o.ViewChild)(a.DocumentListComponent)],c.prototype,"documentList",void 0),i.a([Object(o.ViewChild)(s.HighlightDirective)],c.prototype,"highlighter",void 0),c=i.a([Object(o.Component)({selector:"adf-content-node-selector",styles:[n(153)],template:n(155),encapsulation:o.ViewEncapsulation.None}),i.b(2,Object(o.Optional)()),i.b(2,Object(o.Inject)(r.MAT_DIALOG_DATA)),i.b(3,Object(o.Optional)())],c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DocumentListService",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(2));n.n(r);let s=a=class{constructor(e,t,n,i,o){this.contentService=t,this.apiService=n,this.logService=i,this.thumbnailService=o}getNodesPromise(e,t){let n=a.ROOT_ID;t&&t.rootFolderId&&(n=t.rootFolderId);let i={includeSource:!0,include:["path","properties","allowableOperations"]};return e&&(i.relativePath=e),t&&(t.maxItems&&(i.maxItems=t.maxItems),t.skipCount&&(i.skipCount=t.skipCount)),this.apiService.getInstance().nodes.getNodeChildren(n,i)}deleteNode(e){return r.Observable.fromPromise(this.apiService.getInstance().nodes.deleteNode(e))}copyNode(e,t){return r.Observable.fromPromise(this.apiService.getInstance().nodes.copyNode(e,{targetParentId:t})).catch(e=>this.handleError(e))}moveNode(e,t){return r.Observable.fromPromise(this.apiService.getInstance().nodes.moveNode(e,{targetParentId:t})).catch(e=>this.handleError(e))}createFolder(e,t){return r.Observable.fromPromise(this.apiService.getInstance().nodes.createFolder(e,"/",t)).catch(e=>this.handleError(e))}getFolder(e,t){return r.Observable.fromPromise(this.getNodesPromise(e,t)).map(e=>e).catch(e=>this.handleError(e))}getFolderNode(e){return this.apiService.getInstance().nodes.getNodeInfo(e,{includeSource:!0,include:["path","properties","allowableOperations"]})}getDocumentThumbnailUrl(e){return this.thumbnailService.getDocumentThumbnailUrl(e)}getMimeTypeIcon(e){return this.thumbnailService.getMimeTypeIcon(e)}getDefaultMimeTypeIcon(){return this.thumbnailService.getDefaultMimeTypeIcon()}hasPermission(e,t){return this.contentService.hasPermission(e,t)}handleError(e){return this.logService.error(e),r.Observable.throw(e||"Server error")}};s.ROOT_ID="-root-",s=a=i.a([Object(o.Injectable)()],s);var a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(115);n.d(t,"RatingComponent",function(){return i.b}),n.d(t,"LikeComponent",function(){return i.a}),n.d(t,"SocialModule",function(){return i.c});var o=n(124);for(var r in o)["RatingComponent","LikeComponent","SocialModule","default"].indexOf(r)<0&&function(e){n.d(t,e,function(){return o[e]})}(r);var s=n(136);n.n(s);for(var r in s)["RatingComponent","LikeComponent","SocialModule","default"].indexOf(r)<0&&function(e){n.d(t,e,function(){return s[e]})}(r);var a=n(140);n.d(t,"RatingService",function(){return a.a}),n.d(t,"TagService",function(){return a.b});var c=n(142);for(var r in c)["RatingComponent","LikeComponent","SocialModule","RatingService","TagService","default"].indexOf(r)<0&&function(e){n.d(t,e,function(){return c[e]})}(r)},function(e,t,n){"use strict";var i=n(116);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b}),n.d(t,"c",function(){return i.c})},function(e,t,n){"use strict";var i=n(37);n.d(t,"b",function(){return i.a});var o=n(38);n.d(t,"a",function(){return o.a});var r=n(123);n.d(t,"c",function(){return r.a})},function(e,t,n){var i=n(118);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-rating-container {\n  overflow: hidden;\n  width: 100%; }\n  .adf-rating-container .adf-rating-star {\n    float: left;\n    transition: all .3s;\n    padding: 1px;\n    cursor: pointer; }\n    .adf-rating-container .adf-rating-star .mat-list-item-content {\n      padding: 0 2px !important; }\n  .adf-rating-container .adf-colored-star {\n    color: #ffe944; }\n  .adf-rating-container .adf-grey-star {\n    color: #808080; }\n  .adf-rating-container .adf-stars-container {\n    padding: 0 !important;\n    margin: 0 !important;\n    display: inline-block; }\n  .adf-rating-container .adf-rating-star:hover {\n    transform: rotate(13deg) scale(1.2); }\n"},function(e,t){e.exports='<mat-list id="adf-rating-container" class="adf-rating-container">\n    <mat-list-item class="adf-rating-star" *ngFor="let currentRate of stars; let idx = index">\n            <span id="adf-rate-{{idx}}">\n                <mat-icon id="adf-grey-star-{{idx}}" *ngIf="currentRate.fill" class="adf-colored-star"\n                         (click)="updateVote(idx + 1)">star_rate\n                </mat-icon>\n                <mat-icon id="adf-colored-star-{{idx}}" *ngIf="!currentRate.fill" class="adf-grey-star"\n                         (click)="updateVote(idx + 1)">star_border\n                </mat-icon>\n            </span>\n    </mat-list-item>\n</mat-list>\n'},function(e,t,n){var i=n(121);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-like-container {\n  overflow: hidden;\n  width: 100%; }\n  .adf-like-container .adf-like {\n    padding: 5px;\n    cursor: pointer;\n    float: left;\n    margin: 5px 0px 5px 5px; }\n  .adf-like-container .adf-like-select {\n    cursor: pointer;\n    color: #2196f3; }\n  .adf-like-container .adf-like-select:hover {\n    cursor: pointer;\n    color: #808080; }\n  .adf-like-container .adf-like-grey {\n    cursor: pointer;\n    color: #808080; }\n  .adf-like-container .adf-like-grey:hover {\n    cursor: pointer;\n    color: #2196f3; }\n  .adf-like-container .adf-like-counter {\n    float: left;\n    padding: 13px 0 0 0; }\n  .adf-like-container .adf-left {\n    float: left;\n    padding: 13px 0 0 4px; }\n"},function(e,t){e.exports='<div id="adf-like-container" class="adf-like-container">\n    <div class="adf-like">\n        <span id="adf-like-{{nodeId}}" [ngClass]="{\'adf-like-select\': isLike ,\'adf-like-grey\': !isLike  }"\n              (click)="likeClick()">\n            <mat-icon>thumb_up</mat-icon>\n        </span>\n    </div>\n    <div id="adf-like-counter" class="adf-like-counter">{{likesCounter}}</div>\n    <div class="adf-left" *ngIf="likesCounter<=1">Like</div>\n    <div class="adf-left" *ngIf="likesCounter>1">Likes</div>\n</div>\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(1),o=n(0),r=(n.n(o),n(4)),s=(n.n(r),n(26)),a=(n.n(s),n(16)),c=n(38),l=n(37);let d=class{};d=i.a([Object(o.NgModule)({imports:[r.CoreModule,s.MaterialModule],exports:[l.a,c.a],declarations:[l.a,c.a],providers:[a.a]})],d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(125);n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o)},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(39)),i(n(40)),i(n(41)),i(n(135))},function(e,t){e.exports='<mat-list>\n    <mat-list-item *ngFor="let currentEntry of tagsEntries; let idx = index">\n        <div class="adf-tag-actions-container" id="tag_delete_{{idx}}" (click)="removeTag(currentEntry.entry.id)">\n            <div class="adf-tag-actions-delete-text" id="tag_name_{{idx}}">\n                {{currentEntry.entry.tag}}\n            </div>\n            <mat-icon class="adf-tag-actions-delete-icon">delete</mat-icon>\n        </div>\n    </mat-list-item>\n</mat-list>\n<table class="adf-full-width" cellspacing="0">\n    <tr>\n        <td>\n            <mat-form-field class="adf-full-width">\n                <input matInput placeholder="{{\'TAG.LABEL.NEWTAG\' | translate }}"\n                       type="text"\n                       (keypress)="cleanErrorMsg()"\n                       [(ngModel)]="newTagName"\n                       id="new-tag-text"/>\n                <mat-hint *ngIf="error" [ngStyle]="{\'color\': \'red\'}" align="start">{{errorMsg}}</mat-hint>\n            </mat-form-field>\n        </td>\n        <td>\n            <button class="adf-full-width" color="primary" id="add-tag" (click)="addTag()" [disabled]="disableAddTag"\n                    mat-raised-button>\n                {{\'TAG.BUTTON.ADD\' | translate }}\n            </button>\n        </td>\n    </tr>\n</table>\n'},function(e,t,n){var i=n(128);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-full-width {\n  width: 100%; }\n\n.adf-tag-actions-delete-icon {\n  float: right;\n  cursor: pointer; }\n\n.adf-tag-actions-delete-text {\n  font-size: 16px;\n  float: left; }\n\n.adf-tag-actions-container {\n  padding: 8px 0 8px 0;\n  height: 20px; }\n"},function(e,t){e.exports='<mat-list>\n    <mat-list-item *ngFor="let currentEntry of tagsEntries; let idx = index">\n        <div class="adf-list-tag" id="tag_name_{{idx}}">{{currentEntry.entry.tag}}</div>\n    </mat-list-item>\n</mat-list>\n'},function(e,t,n){var i=n(131);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-list-tag {\n  padding: 16px;\n  font-size: 16px; }\n"},function(e,t){e.exports='<mat-chip-list>\n    <mat-chip class="adf-tag-chips adf-primary-background-color" *ngFor="let currentEntry of tagsEntries; let idx = index">\n        <span id="tag_name_{{idx}}">{{currentEntry.entry.tag}}</span>\n        <button class="adf-tag-chips-delete" id="tag_delete_{{idx}}" type="button" (click)="removeTag(currentEntry.entry.id)">\n            <mat-icon class="adf-tag-chips-delete-icon adf-primary-contrast-text-color" matChipRemove>cancel</mat-icon>\n        </button>\n    </mat-chip>\n</mat-chip-list>\n'},function(e,t,n){var i=n(134);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-tag-chips-delete {\n  overflow: visible;\n  cursor: pointer;\n  height: 17px;\n  width: 20px;\n  float: right;\n  border: 0;\n  background: none;\n  padding: 0;\n  margin: -1px 0px 0px 10px; }\n\n.adf-tag-chips-delete-icon {\n  font-size: 20px;\n  background-repeat: no-repeat;\n  display: inline-block;\n  fill: currentColor;\n  height: 20px;\n  width: 20px; }\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TagModule",function(){return u});var i=n(1),o=n(0),r=(n.n(o),n(4)),s=(n.n(r),n(26)),a=(n.n(s),n(27)),c=n(39),l=(n.n(c),n(40)),d=n(41);let u=class{};u=i.a([Object(o.NgModule)({imports:[r.CoreModule,s.MaterialModule],exports:[c.TagActionsComponent,l.TagListComponent,d.TagNodeListComponent],declarations:[c.TagActionsComponent,l.TagListComponent,d.TagNodeListComponent],providers:[a.TagService,{provide:r.TRANSLATION_PROVIDER,multi:!0,useValue:{name:"ng2-alfresco-tag",source:"assets/ng2-alfresco-tag"}}]})],u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(137))},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(42)),i(n(139))},function(e,t){e.exports='<div *ngIf="showData">\n    <div *ngIf="contentType === \'JSON\'" id="webscript-data-JSON">{{data | json}}</div>\n    <div *ngIf="contentType === \'HTML\'" id="webscript-data-HTML" [innerHTML]="data"></div>\n    <div *ngIf="contentType === \'TEXT\'" id="webscript-data-TEXT">{{data}}</div>\n    <div *ngIf="isDataTableContent()">\n        <adf-datatable id="webscript-datatable-wrapper" [data]="data"></adf-datatable>\n        <div>\n            <div *ngIf="showError" id="error">{{\'WEBSCRIPT.ERROR\' | translate: {\n                data: data,\n                contentType: contentType\n                }\n                }}\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"WebScriptModule",function(){return l});var i=n(1),o=n(0),r=(n.n(o),n(4)),s=(n.n(r),n(17)),a=(n.n(s),n(26)),c=(n.n(a),n(42));let l=class{};l=i.a([Object(o.NgModule)({imports:[r.CoreModule,a.MaterialModule,s.DataTableModule],exports:[c.WebscriptComponent],declarations:[c.WebscriptComponent],providers:[{provide:r.TRANSLATION_PROVIDER,multi:!0,useValue:{name:"ng2-alfresco-webscript",source:"assets/ng2-alfresco-webscript"}}]})],l)},function(e,t,n){"use strict";var i=n(141);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b})},function(e,t,n){"use strict";var i=n(16);n.d(t,"a",function(){return i.a});var o=n(27);n.d(t,"b",function(){return o.TagService})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(143);n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o)},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(28)),i(n(45)),i(n(149)),i(n(150)),i(n(151)),i(n(48)),i(n(49)),i(n(156)),i(n(157)),i(n(158)),i(n(162)),i(n(43)),i(n(44)),i(n(47)),i(n(46)),i(n(50)),i(n(166)),i(n(29)),i(n(167)),i(n(30)),i(n(168))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});let i={"-trashcan-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",format:this.locationFormat,sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"archivedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.DELETED_ON",format:"timeAgo",sortable:!0},{key:"archivedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.DELETED_BY",sortable:!0}],"-sites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"title",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"visibility",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.STATUS",sortable:!0}],"-mysites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"title",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"visibility",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.STATUS",sortable:!0}],"-favorites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",format:this.locationFormat,sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0}],"-recent-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",cssClass:"ellipsis-cell",format:this.locationFormat,sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0}],"-sharedlinks-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",cssClass:"ellipsis-cell",format:this.locationFormat,sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0},{key:"sharedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.SHARED_BY",sortable:!0}],default:[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0}]}},function(e,t,n){e.exports=n.p+"contents-service/document-list/assets/images/empty_doc_lib.a89c064e4edfa54d2e347bf594947219.svg"},function(e,t,n){var i=n(147);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=""},function(e,t){e.exports='<adf-datatable\n    [selectionMode]="selectionMode"\n    [data]="data"\n    [actions]="contentActions"\n    [actionsPosition]="contentActionsPosition"\n    [multiselect]="multiselect"\n    [allowDropFiles]="allowDropFiles"\n    [contextMenu]="contextMenuActions"\n    [rowStyle]="rowStyle"\n    [rowStyleClass]="rowStyleClass"\n    [loading]="loading"\n    [noPermission]="noPermission"\n    [showHeader]="!isEmpty()"\n    (showRowContextMenu)="onShowRowContextMenu($event)"\n    (showRowActionsMenu)="onShowRowActionsMenu($event)"\n    (executeRowAction)="onExecuteRowAction($event)"\n    (rowClick)="onNodeClick($event.value?.node)"\n    (rowDblClick)="onNodeDblClick($event.value?.node)"\n    (row-select)="onNodeSelect($event.detail)"\n    (row-unselect)="onNodeUnselect($event.detail)">\n\n    <div *ngIf="!isEmptyTemplateDefined()">\n        <no-content-template>\n            <ng-template>\n                <adf-empty-list>\n                    <div class="adf-empty-list_template adf-empty-folder">\n                        <div class="adf-empty-folder-this-space-is-empty">{{\'ADF-DOCUMENT-LIST.EMPTY.HEADER\' | translate}}</div>\n                        <div fxHide.lt-md="true" class="adf-empty-folder-drag-drop">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.TITLE\' | translate }}</div>\n                        <div fxHide.lt-md="true" class="adf-empty-folder-any-files-here-to-add">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.SUBTITLE\' | translate }}</div>\n                        <img class="adf-empty-folder-image" [src]="emptyFolderImageUrl">\n                    </div>\n                    \x3c!-- <div adf-empty-list-header class="adf-empty-list-header"> {{\'ADF-DOCUMENT-LIST.EMPTY.HEADER\' | translate}} </div> --\x3e\n                </adf-empty-list>\n            </ng-template>\n        </no-content-template>\n    </div>\n\n    <div *ngIf="!isNoPermissionTemplateDefined()">\n        <no-permission-template>\n            <ng-template>\n                <div class="adf-no-permission__template">\n                    <mat-icon>ic_error</mat-icon>\n                    <p class="adf-no-permission__template--text">{{ \'ADF-DOCUMENT-LIST.NO_PERMISSION\' | translate }}</p>\n                </div>\n            </ng-template>\n        </no-permission-template>\n    </div>\n\n    <div>\n        <loading-content-template>\n            <ng-template>\n                <div class="adf-document-list-loading-container">\n                    <mat-progress-spinner\n                        id="adf-document-list-loading"\n                        class="adf-document-list-loading-margin"\n                        [color]="\'primary\'"\n                        [mode]="\'indeterminate\'">\n                    </mat-progress-spinner>\n                </div>\n            </ng-template>\n        </loading-content-template>\n    </div>\n</adf-datatable>\n\n<ng-container *ngIf="isPaginationEnabled()">\n    <adf-pagination\n        *ngIf="isPaginationNeeded()"\n        class="adf-documentlist-pagination"\n        (changePageSize)="onChangePageSize($event)"\n        (changePageNumber)="onChangePageNumber($event)"\n        (nextPage)="onNextPage($event)"\n        (prevPage)="onPrevPage($event)"\n        [pagination]="pagination"\n        [supportedPageSizes]="supportedPageSizes">\n    </adf-pagination>\n\n    <adf-infinite-pagination\n        *ngIf="!isPaginationNeeded()"\n        [pagination]="pagination"\n        [pageSize]="pageSize"\n        [loading]="infiniteLoading"\n        (loadMore)="loadNextBatch($event)">\n            {{ \'ADF-DOCUMENT-LIST.LAYOUT.LOAD_MORE\' | translate }}\n    </adf-infinite-pagination>\n</ng-container>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ContentColumnComponent",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e,t){this.list=e,this.logService=t,this.type="text",this.sortable=!1,this.title="",this.logService.log("ContentColumnComponent is deprecated starting with 1.7.0 and may be removed in future versions. Use DataColumnComponent instead.")}ngOnInit(){this.srTitle||"$thumbnail"!==this.key||(this.srTitle="Thumbnail")}ngAfterContentInit(){this.register()}register(){return!!this.list&&this.list.registerColumn(this)}};i.a([Object(o.Input)()],r.prototype,"key",void 0),i.a([Object(o.Input)()],r.prototype,"type",void 0),i.a([Object(o.Input)()],r.prototype,"format",void 0),i.a([Object(o.Input)()],r.prototype,"sortable",void 0),i.a([Object(o.Input)()],r.prototype,"title",void 0),i.a([Object(o.ContentChild)(o.TemplateRef)],r.prototype,"template",void 0),i.a([Object(o.Input)("sr-title")],r.prototype,"srTitle",void 0),i.a([Object(o.Input)("class")],r.prototype,"cssClass",void 0),r=i.a([Object(o.Component)({selector:"content-column",template:""})],r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ContentColumnListComponent",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e,t){this.documentList=e,this.logService=t,this.logService.log("ContentColumnListComponent is deprecated starting with 1.7.0 and may be removed in future versions. Use DataColumnListComponent instead.")}registerColumn(e){if(this.documentList&&e){return this.documentList.data.getColumns().push(e),!0}return!1}};r=i.a([Object(o.Component)({selector:"content-columns",template:""})],r)},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(46),a=n(47),c=n(29),l=n(48),d=function(){function e(e,t,n){this.list=e,this.documentActions=t,this.folderActions=n,this.title="Action",this.disabled=!1,this.execute=new r.EventEmitter,this.permissionEvent=new r.EventEmitter,this.error=new r.EventEmitter,this.success=new r.EventEmitter,this.model=new c.ContentActionModel}return e.prototype.ngOnInit=function(){var e=this;this.model=new c.ContentActionModel({title:this.title,icon:this.icon,permission:this.permission,disableWithNoPermission:this.disableWithNoPermission,target:this.target,disabled:this.disabled}),this.handler&&(this.model.handler=this.getSystemHandler(this.target,this.handler)),this.execute&&(this.model.execute=function(t){e.execute.emit({value:t})}),this.register()},e.prototype.register=function(){return!!this.list&&this.list.registerAction(this.model)},e.prototype.ngOnChanges=function(e){this.model.title=this.title},e.prototype.getSystemHandler=function(e,t){var n=this;if(e){var i=e.toLowerCase();if("document"===i)return this.documentActions?(this.documentActions.permissionEvent.subscribe(function(e){n.permissionEvent.emit(e)}),this.documentActions.error.subscribe(function(e){n.error.emit(e)}),this.documentActions.success.subscribe(function(e){n.success.emit(e)}),this.documentActions.getHandler(t)):null;if("folder"===i)return this.folderActions?(this.folderActions.permissionEvent.subscribe(function(e){n.permissionEvent.emit(e)}),this.folderActions.error.subscribe(function(e){n.error.emit(e)}),this.folderActions.success.subscribe(function(e){n.success.emit(e)}),this.folderActions.getHandler(t)):null}return null},i([r.Input(),o("design:type",String)],e.prototype,"title",void 0),i([r.Input(),o("design:type",String)],e.prototype,"icon",void 0),i([r.Input(),o("design:type",String)],e.prototype,"handler",void 0),i([r.Input(),o("design:type",String)],e.prototype,"target",void 0),i([r.Input(),o("design:type",String)],e.prototype,"permission",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"disableWithNoPermission",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"disabled",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"execute",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"permissionEvent",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"error",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"success",void 0),e=i([r.Component({selector:"content-action",template:"",providers:[s.DocumentActionsService,a.FolderActionsService]}),o("design:paramtypes",["function"==typeof(t=void 0!==l.ContentActionListComponent&&l.ContentActionListComponent)&&t||Object,"function"==typeof(n=void 0!==s.DocumentActionsService&&s.DocumentActionsService)&&n||Object,"function"==typeof(d=void 0!==a.FolderActionsService&&a.FolderActionsService)&&d||Object])],e);var t,n,d}();t.ContentActionComponent=d},function(e,t){e.exports=s},function(e,t,n){var i=n(154);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=""},function(e,t){e.exports='<header matDialogTitle\n    class="adf-content-node-selector-title"\n    data-automation-id="content-node-selector-title">{{title}}</header>\n\n<section matDialogContent\n    class="adf-content-node-selector-content"\n    (node-select)="onNodeSelect($event)">\n\n    <mat-form-field floatPlaceholder="never" class="adf-content-node-selector-content-input">\n        <input #searchInput\n            matInput\n            placeholder="Search"\n            (input)="search(searchInput.value)"\n            [value]="searchTerm"\n            data-automation-id="content-node-selector-search-input">\n\n        <mat-icon *ngIf="searchTerm.length > 0"\n                matSuffix (click)="clear()"\n                class="adf-content-node-selector-content-input-icon"\n                data-automation-id="content-node-selector-search-clear">clear</mat-icon>\n\n        <mat-icon *ngIf="searchTerm.length === 0"\n            matSuffix\n            class="adf-content-node-selector-content-input-icon"\n            data-automation-id="content-node-selector-search-icon">search</mat-icon>\n\n    </mat-form-field>\n\n    <adf-sites-dropdown\n        (change)="siteChanged($event)"\n        data-automation-id="content-node-selector-sites-combo"></adf-sites-dropdown>\n\n    <adf-toolbar>\n        <adf-toolbar-title>\n            <adf-dropdown-breadcrumb *ngIf="needBreadcrumbs()"\n                class="adf-content-node-selector-content-breadcrumb"\n                [target]="documentList"\n                [folderNode]="breadcrumbFolderNode"\n                data-automation-id="content-node-selector-content-breadcrumb">\n            </adf-dropdown-breadcrumb>\n        </adf-toolbar-title>\n    </adf-toolbar>\n\n    <div class="adf-content-node-selector-content-list" data-automation-id="content-node-selector-content-list">\n        <adf-document-list\n                    #documentList\n                    adf-highlight\n                    adf-highlight-selector=".cell-value adf-datatable-cell .adf-datatable-cell-value"\n                    [node]="nodes"\n                    [rowFilter]="rowFilter"\n                    [imageResolver]="imageResolver"\n                    [currentFolderId]="folderIdToShow"\n                    selectionMode="single"\n                    [contextMenuActions]="false"\n                    [contentActions]="false"\n                    [allowDropFiles]="false"\n                    [enablePagination]="!showingSearchResults"\n                    paginationStrategy="{{paginationStrategy}}"\n                    [pageSize]="pageSize"\n                    (folderChange)="onFolderChange()"\n                    (ready)="onFolderLoaded()"\n                    data-automation-id="content-node-selector-document-list">\n            <empty-folder-content>\n                <ng-template>\n                    <div>{{ \'NODE_SELECTOR.NO_RESULTS\' | translate }}</div>\n                </ng-template>\n            </empty-folder-content>\n        </adf-document-list>\n\n        <adf-infinite-pagination\n            *ngIf="showingSearchResults && isSearchTermLongEnough()"\n            [pagination]="pagination"\n            [pageSize]="pageSize"\n            [loading]="loadingSearchResults"\n            (loadMore)="getNextPageOfSearch($event)"\n            data-automation-id="content-node-selector-search-pagination">\n            {{ \'ADF-DOCUMENT-LIST.LAYOUT.LOAD_MORE\' | translate }}\n        </adf-infinite-pagination>\n    </div>\n\n</section>\n\n<footer matDialogActions class="adf-content-node-selector-actions">\n\n    <button *ngIf="inDialog"\n        mat-button\n        class="adf-content-node-selector-actions-cancel"\n        (click)="close()"\n        data-automation-id="content-node-selector-actions-cancel">{{ \'NODE_SELECTOR.CANCEL\' | translate }}\n    </button>\n\n    <button mat-button\n        [disabled]="!chosenNode"\n        class="adf-content-node-selector-actions-choose"\n        (click)="choose()"\n        data-automation-id="content-node-selector-actions-choose">{{ \'NODE_SELECTOR.CHOOSE\' | translate }}\n    </button>\n\n</footer>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"EmptyFolderContentDirective",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e){this.documentList=e}ngAfterContentInit(){this.documentList.emptyFolderTemplate=this.template,this.documentList.dataTable.noContentTemplate=this.template}};i.a([Object(o.ContentChild)(o.TemplateRef)],r.prototype,"template",void 0),r=i.a([Object(o.Directive)({selector:"empty-folder-content"})],r)},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(28),a=function(){function e(e){this.documentList=e}return e.prototype.ngAfterContentInit=function(){this.documentList.noPermissionTemplate=this.template,this.documentList.dataTable.noPermissionTemplate=this.template},i([r.ContentChild(r.TemplateRef),o("design:type",Object)],e.prototype,"template",void 0),e=i([r.Directive({selector:"no-permission-content"}),o("design:paramtypes",["function"==typeof(t=void 0!==s.DocumentListComponent&&s.DocumentListComponent)&&t||Object])],e);var t}();t.NoPermissionContentDirective=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"BreadcrumbComponent",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(){this.folderNode=null,this.root=null,this.rootId=null,this.route=[],this.navigate=new o.EventEmitter}get hasRoot(){return!!this.root}ngOnChanges(e){if(e.folderNode){const t=e.folderNode.currentValue;this.route=this.parseRoute(t)}}parseRoute(e){if(e&&e.path){const t=(e.path.elements||[]).slice();t.push({id:e.id,name:e.name});const n=this.getElementPosition(t,this.rootId);return n>0&&t.splice(0,n),-1===n&&this.rootId&&(t[0].id=this.rootId),this.root&&(t[0].name=this.root),t}return[]}getElementPosition(e,t){let n=-1;return e&&e.length>0&&t&&(n=e.findIndex(e=>e.id===t)),n}onRoutePathClick(e,t){t&&t.preventDefault(),e&&(this.navigate.emit(e),this.target&&this.target.loadFolderByNodeId(e.id))}};i.a([Object(o.Input)()],r.prototype,"folderNode",void 0),i.a([Object(o.Input)()],r.prototype,"root",void 0),i.a([Object(o.Input)()],r.prototype,"rootId",void 0),i.a([Object(o.Input)()],r.prototype,"target",void 0),i.a([Object(o.Output)()],r.prototype,"navigate",void 0),r=i.a([Object(o.Component)({selector:"adf-breadcrumb",template:n(159),styles:[n(160)],encapsulation:o.ViewEncapsulation.None,host:{class:"adf-breadcrumb"}})],r)},function(e,t){e.exports='<div *ngIf="folderNode" data-automation-id="breadcrumb" class="adf-breadcrumb-container">\n    <li *ngFor="let item of route; let last = last"\n        [class.active]="last"\n        [ngSwitch]="last"\n        title="{{ item.name | translate }}"\n        class="adf-breadcrumb-item">\n\n        <a *ngSwitchDefault href="#" [attr.data-automation-id]="\'breadcrumb_\' + item.name"\n           class="adf-breadcrumb-item-anchor"\n           (click)="onRoutePathClick(item, $event)">\n            {{ item.name | translate }}\n        </a>\n\n        <div *ngSwitchCase="true" class="adf-breadcrumb-item-current">\n            {{ item.name | translate }}\n        </div>\n\n        <mat-icon class="adf-breadcrumb-item-chevron" *ngIf="!last">\n            chevron_right\n        </mat-icon>\n    </li>\n</div>\n<div *ngIf="!folderNode && hasRoot">\n    <li class="adf-breadcrumb-item">\n        <div class="adf-breadcrumb-item-current">\n            {{ root | translate }}\n        </div>\n    </li>\n</div>\n'},function(e,t,n){var i=n(161);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=""},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DropdownSitesComponent",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(4));n.n(r);let s=class{constructor(e){this.sitesService=e,this.hideMyFiles=!1,this.change=new o.EventEmitter,this.MY_FILES_VALUE="default",this.siteList=[]}ngOnInit(){this.sitesService.getSites().subscribe(e=>{this.siteList=e},e=>{})}selectedSite(){let e;e=this.siteSelected===this.MY_FILES_VALUE?new r.SiteModel:this.siteList.find(e=>e.guid===this.siteSelected),this.change.emit(e)}};i.a([Object(o.Input)()],s.prototype,"hideMyFiles",void 0),i.a([Object(o.Output)()],s.prototype,"change",void 0),s=i.a([Object(o.Component)({selector:"adf-sites-dropdown",styles:[n(163)],template:n(165)})],s)},function(e,t,n){var i=n(164);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=""},function(e,t){e.exports='<div id="site-dropdown-container" class="adf-site-dropdown-container">\n    <mat-form-field>\n        <mat-select\n            class="adf-site-dropdown-list-element"\n            id="site-dropdown"\n            placeholder="{{\'DROPDOWN.PLACEHOLDER_LABEL\' | translate}}"\n            floatPlaceholder="never"\n            data-automation-id="site-my-files-select"\n            [(ngModel)]="siteSelected"\n            (ngModelChange)="selectedSite()">\n            <mat-option *ngIf="!hideMyFiles" data-automation-id="site-my-files-option" id="default_site_option" [value]="MY_FILES_VALUE">{{\'DROPDOWN.MY_FILES_OPTION\' | translate}}</mat-option>\n            <mat-option *ngFor="let site of siteList" [value]="site.guid">\n                {{ site.title }}\n            </mat-option>\n        </mat-select>\n    </mat-form-field>\n</div>\n'},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(3),a=n(4),c=n(2),l=n(49),d=n(50),u=function(){function e(e,t,n){this.dialog=e,this.documentListService=t,this.contentService=n}return e.prototype.copyContent=function(e,t){return this.doFileOperation("copy","content",e,t)},e.prototype.copyFolder=function(e,t){return this.doFileOperation("copy","folder",e,t)},e.prototype.moveContent=function(e,t){return this.doFileOperation("move","content",e,t)},e.prototype.moveFolder=function(e,t){return this.doFileOperation("move","folder",e,t)},e.prototype.doFileOperation=function(e,t,n,i){var o=this,s=new c.Subject;if(this.contentService.hasPermission(n,i)){var a={title:e+" "+n.name+" to ...",currentFolderId:n.parentId,rowFilter:this.rowFilter.bind(this,n.id),imageResolver:this.imageResolver.bind(this),select:new r.EventEmitter};return this.dialog.open(l.ContentNodeSelectorComponent,{data:a,panelClass:"adf-content-node-selector-dialog",width:"630px"}),a.select.subscribe(function(i){var r=i[0];o.documentListService[e+"Node"].call(o.documentListService,n.id,r.id).subscribe(s.next.bind(s,"OPERATION.SUCCES."+t.toUpperCase()+"."+e.toUpperCase()),s.error.bind(s)),o.dialog.closeAll()}),s}return s.error(new Error(JSON.stringify({error:{statusCode:403}}))),s},e.prototype.rowFilter=function(e,t){var n=t.node.entry;return n.id!==e&&!n.isFile},e.prototype.imageResolver=function(e,t){var n=e.node.entry;return this.contentService.hasPermission(n,"create")?null:this.documentListService.getMimeTypeIcon("disable/folder")},e=i([r.Injectable(),o("design:paramtypes",["function"==typeof(t=void 0!==s.MatDialog&&s.MatDialog)&&t||Object,"function"==typeof(n=void 0!==d.DocumentListService&&d.DocumentListService)&&n||Object,"function"==typeof(u=void 0!==a.AlfrescoContentService&&a.AlfrescoContentService)&&u||Object])],e);var t,n,u}();t.NodeActionsService=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{}t.NodePaging=i;class o{}t.NodePagingList=o;class r{}t.NodeMinimalEntry=r;class s{}t.Pagination=s;class a{constructor(){this.properties={}}}t.NodeMinimal=a;class c{}t.UserInfo=c;class l{}t.ContentInfo=l;class d{}t.PathInfoEntity=d;class u{}t.PathElementEntity=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0),this.isFolder=!0,this.isFile=!0,this.css=e,this.permission=t,this.isFile=n,this.isFolder=i}}();t.PermissionStyleModel=i}])});
//# sourceMappingURL=contents-service.js.map

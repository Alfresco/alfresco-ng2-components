/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require("@angular/core");
var FileUploadingListComponent = (function () {
    function FileUploadingListComponent(el) {
        this.el = el;
        console.log('filesUploadingList constructor', el);
    }
    FileUploadingListComponent.prototype.abort = function (id) {
        var file = this.filesUploadingList.filter(function (uploadingFileModel) {
            return uploadingFileModel.id === id;
        });
        file[0].emitAbort();
    };
    FileUploadingListComponent.prototype.cancelAllFiles = function ($event) {
        if ($event) {
            $event.preventDefault();
        }
        this.filesUploadingList.forEach(function (uploadingFileModel) {
            uploadingFileModel.emitAbort();
        });
    };
    FileUploadingListComponent.prototype.isUploadCompleted = function () {
        var isPending = false;
        var isAllCompleted = true;
        for (var i = 0; i < this.filesUploadingList.length && !isPending; i++) {
            var uploadingFileModel = this.filesUploadingList[i];
            if (!uploadingFileModel.done && !uploadingFileModel.abort) {
                isPending = true;
                isAllCompleted = false;
            }
        }
        return isAllCompleted;
    };
    return FileUploadingListComponent;
}());
__decorate([
    core_1.Input(),
    __metadata("design:type", Array)
], FileUploadingListComponent.prototype, "filesUploadingList", void 0);
FileUploadingListComponent = __decorate([
    core_1.Component({
        selector: 'alfresco-file-uploading-list',
        moduleId: module.id,
        template: "<div [ngClass]=\"{hide:  isUploadCompleted()}\" [ngClass]=\"{show:   !isUploadCompleted()}\"      class=\"body-dialog-header\">     <div class=\"body-dialog-action\"></div>     <div class=\"body-dialog-cancel\"><a data-automation-id=\"cancel_upload_all\" href=\"#\" (click)=\"cancelAllFiles($event)\">{{'FILE_UPLOAD.BUTTON.CANCEL' | translate}}</a></div> </div> <table class=\"mdl-data-table mdl-js-data-table mdl-shadow--2dp\">     <tr>         <th>{{'FILE_UPLOAD.FILE_INFO.NAME' | translate}}</th>         <th>{{'FILE_UPLOAD.FILE_INFO.PROGRESS' | translate}}</th>         <th class=\"mdl-cell--hide-phone size-column\">{{'FILE_UPLOAD.FILE_INFO.SIZE' | translate}}</th>         <th>{{'FILE_UPLOAD.FILE_INFO.ACTION' | translate}}</th>     </tr>     <tr *ngFor=\"let file of filesUploadingList\" tabindex=\"0\">         <td attr.data-automation-id=\"dialog_{{file.name}}\" class=\"mdl-data-table__cell--non-numeric\"><div class=\"truncate\">{{file.name}}</div></td>         <td _ngcontent-hvq-3=\"\">             <div _ngcontent-hvq-3=\"\" class=\"mdl-progress mdl-js-progress is-upgraded\" id=\"{{file.id}}\"                  data-upgraded=\",MaterialProgress\">                 <div class=\"progressbar bar bar1\" attr.data-automation-id=\"dialog_progress_{{file.name}}\" [style.width.%]=\"file.progress.percent\"></div>                 <div class=\"bufferbar bar bar2\" style=\"width: 100%;\"></div>                 <div class=\"auxbar bar bar3\" style=\"width: 0%;\"></div>             </div>         </td>         <td class=\"mdl-data-table__cell--non-numeric mdl-cell--hide-phone size-column\" attr.data-automation-id=\"{{file.name}}_filesize\">{{file.size}}</td>         <td>             <span *ngIf=\"file.done && !file.abort\" ><i data-automation-id=\"done_icon\" class=\"material-icons action-icons\">done</i></span>             <span *ngIf=\"file.uploading\" (click)=\"abort(file.id)\" class=\"cursor\" tabindex=\"0\"><i data-automation-id=\"abort_cancel_upload\"                                                                                      class=\"material-icons action-icons\">                 remove_circle_outline</i></span>             <span *ngIf=\"file.abort\"><i class=\"material-icons action-icons\" data-automation-id=\"upload_stopped\" tabindex=\"0\">remove_circle</i></span>         </td>     </tr> </table>",
        styles: [".mdl-data-table {     width: 100%;     border: 0px; }  .cursor {     cursor: pointer; }  .body-dialog-header {     display: -webkit-box;     display: -moz-box;     display: -ms-flexbox;     display: -webkit-flex;     display: flex;     background-color: #f5f5f5;     border-bottom: solid 1px #eee;     height: 30px;     line-height: 30px; }  .body-dialog-action {     -webkit-flex: 1 1 auto;     flex: 1 1 auto;     overflow: hidden;     padding: 0 18px;     text-overflow: ellipsis;     white-space: nowrap;     word-wrap: break-word; }  .body-dialog-cancel {     -webkit-flex: none;     flex: none;     display: inline;     padding-right: 13px;     text-align: right; }  .action-icons {     text-align: center;     width: 100%; } :host .truncate {     margin-left: auto;     white-space: nowrap;     overflow: hidden;     text-overflow: ellipsis; }  :host .mdl-progress{     width: 150px; }  @media (max-device-width: 360px){     .truncate {         max-width: 50px;         margin-left: 0px;     } }  @media (max-device-width: 568px) {     .truncate {         width: 60px;     }     .mdl-progress {         width: 60px;     } }  @media (max-width: 740px) {     .truncate {         max-width: 80px;     }      .mdl-progress {         max-width: 70px;     }      .size-column {         display: none;     } }  @media (min-width: 740px) {     .truncate {         width: 249px;     }      .size-column {         display: table-cell;     } }"]
    }),
    __metadata("design:paramtypes", [core_1.ElementRef])
], FileUploadingListComponent);
exports.FileUploadingListComponent = FileUploadingListComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZmlsZS11cGxvYWRpbmctbGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHOzs7Ozs7Ozs7OztBQUVILHNDQUE2RDtBQW1CN0QsSUFBYSwwQkFBMEI7SUFLbkMsb0NBQW1CLEVBQWM7UUFBZCxPQUFFLEdBQUYsRUFBRSxDQUFZO1FBQzdCLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0NBQWdDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQU9ELDBDQUFLLEdBQUwsVUFBTSxFQUFVO1FBQ1osSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxVQUFDLGtCQUFrQjtZQUN6RCxNQUFNLENBQUMsa0JBQWtCLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQztRQUN4QyxDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBS0QsbURBQWMsR0FBZCxVQUFlLE1BQU07UUFDakIsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNULE1BQU0sQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUM1QixDQUFDO1FBQ0QsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxVQUFDLGtCQUE2QjtZQUMxRCxrQkFBa0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFNRCxzREFBaUIsR0FBakI7UUFDSSxJQUFJLFNBQVMsR0FBRyxLQUFLLENBQUM7UUFDdEIsSUFBSSxjQUFjLEdBQUcsSUFBSSxDQUFDO1FBQzFCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3BFLElBQUksa0JBQWtCLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BELEVBQUUsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDeEQsU0FBUyxHQUFHLElBQUksQ0FBQztnQkFDakIsY0FBYyxHQUFHLEtBQUssQ0FBQztZQUMzQixDQUFDO1FBQ0wsQ0FBQztRQUNELE1BQU0sQ0FBQyxjQUFjLENBQUM7SUFDMUIsQ0FBQztJQUNMLGlDQUFDO0FBQUQsQ0FqREEsQUFpREMsSUFBQTtBQTlDRztJQURDLFlBQUssRUFBRTs7c0VBQ3lCO0FBSHhCLDBCQUEwQjtJQU50QyxnQkFBUyxDQUFDO1FBQ1AsUUFBUSxFQUFFLDhCQUE4QjtRQUN4QyxRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUU7UUFDbkIsUUFBUSxFQUFFLG15RUFBbXlFO1FBQzd5RSxNQUFNLEVBQUUsQ0FBQyxpNkNBQWk2QyxDQUFDO0tBQzk2QyxDQUFDO3FDQU15QixpQkFBVTtHQUx4QiwwQkFBMEIsQ0FpRHRDO0FBakRZLGdFQUEwQiIsImZpbGUiOiJjb21wb25lbnRzL2ZpbGUtdXBsb2FkaW5nLWxpc3QuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRmlsZU1vZGVsIH0gZnJvbSAnLi4vbW9kZWxzL2ZpbGUubW9kZWwnO1xuXG4vKipcbiAqIDxhbGZyZXNjby1maWxlLXVwbG9hZGluZy1saXN0IFtmaWxlc1VwbG9hZGluZ0xpc3RdPVwiRmlsZU1vZGVsW11cIiA+PC9hbGZyZXNjby1maWxlLXVwbG9hZGluZy1saXN0PlxuICpcbiAqIFRoaXMgY29tcG9uZW50IHNob3cgYSBsaXN0IG9mIHRoZSB1cGxvYWRpbmcgZmlsZXMgY29udGFpbmVkIGluIHRoZSBmaWxlc1VwbG9hZGluZ0xpc3QuXG4gKlxuICogQElucHV0UGFyYW0ge0ZpbGVNb2RlbFtdfSBmaWxlc1VwbG9hZGluZ0xpc3QgLSBsaXN0IG9mIHRoZSB1cGxvYWRpbmcgZmlsZXMgLlxuICpcbiAqXG4gKiBAcmV0dXJucyB7RmlsZVVwbG9hZGluZ0xpc3RDb21wb25lbnR9IC5cbiAqL1xuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhbGZyZXNjby1maWxlLXVwbG9hZGluZy1saXN0JyxcbiAgICBtb2R1bGVJZDogbW9kdWxlLmlkLFxuICAgIHRlbXBsYXRlOiBcIjxkaXYgW25nQ2xhc3NdPVxcXCJ7aGlkZTogIGlzVXBsb2FkQ29tcGxldGVkKCl9XFxcIiBbbmdDbGFzc109XFxcIntzaG93OiAgICFpc1VwbG9hZENvbXBsZXRlZCgpfVxcXCIgICAgICBjbGFzcz1cXFwiYm9keS1kaWFsb2ctaGVhZGVyXFxcIj4gICAgIDxkaXYgY2xhc3M9XFxcImJvZHktZGlhbG9nLWFjdGlvblxcXCI+PC9kaXY+ICAgICA8ZGl2IGNsYXNzPVxcXCJib2R5LWRpYWxvZy1jYW5jZWxcXFwiPjxhIGRhdGEtYXV0b21hdGlvbi1pZD1cXFwiY2FuY2VsX3VwbG9hZF9hbGxcXFwiIGhyZWY9XFxcIiNcXFwiIChjbGljayk9XFxcImNhbmNlbEFsbEZpbGVzKCRldmVudClcXFwiPnt7J0ZJTEVfVVBMT0FELkJVVFRPTi5DQU5DRUwnIHwgdHJhbnNsYXRlfX08L2E+PC9kaXY+IDwvZGl2PiA8dGFibGUgY2xhc3M9XFxcIm1kbC1kYXRhLXRhYmxlIG1kbC1qcy1kYXRhLXRhYmxlIG1kbC1zaGFkb3ctLTJkcFxcXCI+ICAgICA8dHI+ICAgICAgICAgPHRoPnt7J0ZJTEVfVVBMT0FELkZJTEVfSU5GTy5OQU1FJyB8IHRyYW5zbGF0ZX19PC90aD4gICAgICAgICA8dGg+e3snRklMRV9VUExPQUQuRklMRV9JTkZPLlBST0dSRVNTJyB8IHRyYW5zbGF0ZX19PC90aD4gICAgICAgICA8dGggY2xhc3M9XFxcIm1kbC1jZWxsLS1oaWRlLXBob25lIHNpemUtY29sdW1uXFxcIj57eydGSUxFX1VQTE9BRC5GSUxFX0lORk8uU0laRScgfCB0cmFuc2xhdGV9fTwvdGg+ICAgICAgICAgPHRoPnt7J0ZJTEVfVVBMT0FELkZJTEVfSU5GTy5BQ1RJT04nIHwgdHJhbnNsYXRlfX08L3RoPiAgICAgPC90cj4gICAgIDx0ciAqbmdGb3I9XFxcImxldCBmaWxlIG9mIGZpbGVzVXBsb2FkaW5nTGlzdFxcXCIgdGFiaW5kZXg9XFxcIjBcXFwiPiAgICAgICAgIDx0ZCBhdHRyLmRhdGEtYXV0b21hdGlvbi1pZD1cXFwiZGlhbG9nX3t7ZmlsZS5uYW1lfX1cXFwiIGNsYXNzPVxcXCJtZGwtZGF0YS10YWJsZV9fY2VsbC0tbm9uLW51bWVyaWNcXFwiPjxkaXYgY2xhc3M9XFxcInRydW5jYXRlXFxcIj57e2ZpbGUubmFtZX19PC9kaXY+PC90ZD4gICAgICAgICA8dGQgX25nY29udGVudC1odnEtMz1cXFwiXFxcIj4gICAgICAgICAgICAgPGRpdiBfbmdjb250ZW50LWh2cS0zPVxcXCJcXFwiIGNsYXNzPVxcXCJtZGwtcHJvZ3Jlc3MgbWRsLWpzLXByb2dyZXNzIGlzLXVwZ3JhZGVkXFxcIiBpZD1cXFwie3tmaWxlLmlkfX1cXFwiICAgICAgICAgICAgICAgICAgZGF0YS11cGdyYWRlZD1cXFwiLE1hdGVyaWFsUHJvZ3Jlc3NcXFwiPiAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwicHJvZ3Jlc3NiYXIgYmFyIGJhcjFcXFwiIGF0dHIuZGF0YS1hdXRvbWF0aW9uLWlkPVxcXCJkaWFsb2dfcHJvZ3Jlc3Nfe3tmaWxlLm5hbWV9fVxcXCIgW3N0eWxlLndpZHRoLiVdPVxcXCJmaWxlLnByb2dyZXNzLnBlcmNlbnRcXFwiPjwvZGl2PiAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYnVmZmVyYmFyIGJhciBiYXIyXFxcIiBzdHlsZT1cXFwid2lkdGg6IDEwMCU7XFxcIj48L2Rpdj4gICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImF1eGJhciBiYXIgYmFyM1xcXCIgc3R5bGU9XFxcIndpZHRoOiAwJTtcXFwiPjwvZGl2PiAgICAgICAgICAgICA8L2Rpdj4gICAgICAgICA8L3RkPiAgICAgICAgIDx0ZCBjbGFzcz1cXFwibWRsLWRhdGEtdGFibGVfX2NlbGwtLW5vbi1udW1lcmljIG1kbC1jZWxsLS1oaWRlLXBob25lIHNpemUtY29sdW1uXFxcIiBhdHRyLmRhdGEtYXV0b21hdGlvbi1pZD1cXFwie3tmaWxlLm5hbWV9fV9maWxlc2l6ZVxcXCI+e3tmaWxlLnNpemV9fTwvdGQ+ICAgICAgICAgPHRkPiAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cXFwiZmlsZS5kb25lICYmICFmaWxlLmFib3J0XFxcIiA+PGkgZGF0YS1hdXRvbWF0aW9uLWlkPVxcXCJkb25lX2ljb25cXFwiIGNsYXNzPVxcXCJtYXRlcmlhbC1pY29ucyBhY3Rpb24taWNvbnNcXFwiPmRvbmU8L2k+PC9zcGFuPiAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cXFwiZmlsZS51cGxvYWRpbmdcXFwiIChjbGljayk9XFxcImFib3J0KGZpbGUuaWQpXFxcIiBjbGFzcz1cXFwiY3Vyc29yXFxcIiB0YWJpbmRleD1cXFwiMFxcXCI+PGkgZGF0YS1hdXRvbWF0aW9uLWlkPVxcXCJhYm9ydF9jYW5jZWxfdXBsb2FkXFxcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcIm1hdGVyaWFsLWljb25zIGFjdGlvbi1pY29uc1xcXCI+ICAgICAgICAgICAgICAgICByZW1vdmVfY2lyY2xlX291dGxpbmU8L2k+PC9zcGFuPiAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cXFwiZmlsZS5hYm9ydFxcXCI+PGkgY2xhc3M9XFxcIm1hdGVyaWFsLWljb25zIGFjdGlvbi1pY29uc1xcXCIgZGF0YS1hdXRvbWF0aW9uLWlkPVxcXCJ1cGxvYWRfc3RvcHBlZFxcXCIgdGFiaW5kZXg9XFxcIjBcXFwiPnJlbW92ZV9jaXJjbGU8L2k+PC9zcGFuPiAgICAgICAgIDwvdGQ+ICAgICA8L3RyPiA8L3RhYmxlPlwiLFxuICAgIHN0eWxlczogW1wiLm1kbC1kYXRhLXRhYmxlIHsgICAgIHdpZHRoOiAxMDAlOyAgICAgYm9yZGVyOiAwcHg7IH0gIC5jdXJzb3IgeyAgICAgY3Vyc29yOiBwb2ludGVyOyB9ICAuYm9keS1kaWFsb2ctaGVhZGVyIHsgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94OyAgICAgZGlzcGxheTogLW1vei1ib3g7ICAgICBkaXNwbGF5OiAtbXMtZmxleGJveDsgICAgIGRpc3BsYXk6IC13ZWJraXQtZmxleDsgICAgIGRpc3BsYXk6IGZsZXg7ICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1OyAgICAgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4ICNlZWU7ICAgICBoZWlnaHQ6IDMwcHg7ICAgICBsaW5lLWhlaWdodDogMzBweDsgfSAgLmJvZHktZGlhbG9nLWFjdGlvbiB7ICAgICAtd2Via2l0LWZsZXg6IDEgMSBhdXRvOyAgICAgZmxleDogMSAxIGF1dG87ICAgICBvdmVyZmxvdzogaGlkZGVuOyAgICAgcGFkZGluZzogMCAxOHB4OyAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7ICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOyAgICAgd29yZC13cmFwOiBicmVhay13b3JkOyB9ICAuYm9keS1kaWFsb2ctY2FuY2VsIHsgICAgIC13ZWJraXQtZmxleDogbm9uZTsgICAgIGZsZXg6IG5vbmU7ICAgICBkaXNwbGF5OiBpbmxpbmU7ICAgICBwYWRkaW5nLXJpZ2h0OiAxM3B4OyAgICAgdGV4dC1hbGlnbjogcmlnaHQ7IH0gIC5hY3Rpb24taWNvbnMgeyAgICAgdGV4dC1hbGlnbjogY2VudGVyOyAgICAgd2lkdGg6IDEwMCU7IH0gOmhvc3QgLnRydW5jYXRlIHsgICAgIG1hcmdpbi1sZWZ0OiBhdXRvOyAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsgICAgIG92ZXJmbG93OiBoaWRkZW47ICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgfSAgOmhvc3QgLm1kbC1wcm9ncmVzc3sgICAgIHdpZHRoOiAxNTBweDsgfSAgQG1lZGlhIChtYXgtZGV2aWNlLXdpZHRoOiAzNjBweCl7ICAgICAudHJ1bmNhdGUgeyAgICAgICAgIG1heC13aWR0aDogNTBweDsgICAgICAgICBtYXJnaW4tbGVmdDogMHB4OyAgICAgfSB9ICBAbWVkaWEgKG1heC1kZXZpY2Utd2lkdGg6IDU2OHB4KSB7ICAgICAudHJ1bmNhdGUgeyAgICAgICAgIHdpZHRoOiA2MHB4OyAgICAgfSAgICAgLm1kbC1wcm9ncmVzcyB7ICAgICAgICAgd2lkdGg6IDYwcHg7ICAgICB9IH0gIEBtZWRpYSAobWF4LXdpZHRoOiA3NDBweCkgeyAgICAgLnRydW5jYXRlIHsgICAgICAgICBtYXgtd2lkdGg6IDgwcHg7ICAgICB9ICAgICAgLm1kbC1wcm9ncmVzcyB7ICAgICAgICAgbWF4LXdpZHRoOiA3MHB4OyAgICAgfSAgICAgIC5zaXplLWNvbHVtbiB7ICAgICAgICAgZGlzcGxheTogbm9uZTsgICAgIH0gfSAgQG1lZGlhIChtaW4td2lkdGg6IDc0MHB4KSB7ICAgICAudHJ1bmNhdGUgeyAgICAgICAgIHdpZHRoOiAyNDlweDsgICAgIH0gICAgICAuc2l6ZS1jb2x1bW4geyAgICAgICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7ICAgICB9IH1cIl1cbn0pXG5leHBvcnQgY2xhc3MgRmlsZVVwbG9hZGluZ0xpc3RDb21wb25lbnQge1xuXG4gICAgQElucHV0KClcbiAgICBmaWxlc1VwbG9hZGluZ0xpc3Q6IEZpbGVNb2RlbCBbXTtcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBlbDogRWxlbWVudFJlZikge1xuICAgICAgICBjb25zb2xlLmxvZygnZmlsZXNVcGxvYWRpbmdMaXN0IGNvbnN0cnVjdG9yJywgZWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFib3J0IHRoZSBpbiBwcm9ncmVzcyB1cGxvYWRpbmcgb2YgYSBzcGVjaWZpYyBmaWxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gRmlsZU1vZGVsIGlkIG9mIHRoZSBmaWxlIHRvIGFib3J0LlxuICAgICAqL1xuICAgIGFib3J0KGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgbGV0IGZpbGUgPSB0aGlzLmZpbGVzVXBsb2FkaW5nTGlzdC5maWx0ZXIoKHVwbG9hZGluZ0ZpbGVNb2RlbCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHVwbG9hZGluZ0ZpbGVNb2RlbC5pZCA9PT0gaWQ7XG4gICAgICAgIH0pO1xuICAgICAgICBmaWxlWzBdLmVtaXRBYm9ydCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGwgdGhlIGFib3J0IG1ldGhvZCBmb3IgZWFjaCBmaWxlXG4gICAgICovXG4gICAgY2FuY2VsQWxsRmlsZXMoJGV2ZW50KSB7XG4gICAgICAgIGlmICgkZXZlbnQpIHtcbiAgICAgICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlsZXNVcGxvYWRpbmdMaXN0LmZvckVhY2goKHVwbG9hZGluZ0ZpbGVNb2RlbDogRmlsZU1vZGVsKSA9PiB7XG4gICAgICAgICAgICB1cGxvYWRpbmdGaWxlTW9kZWwuZW1pdEFib3J0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZlcmlmeSBpZiBhbGwgdGhlIGZpbGVzIGFyZSBpbiBzdGF0ZSBkb25lIG9yIGFib3J0XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IC0gZmFsc2UgaWYgdGhlcmUgaXMgYSBmaWxlIGluIHByb2dyZXNzXG4gICAgICovXG4gICAgaXNVcGxvYWRDb21wbGV0ZWQoKSB7XG4gICAgICAgIGxldCBpc1BlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgbGV0IGlzQWxsQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZpbGVzVXBsb2FkaW5nTGlzdC5sZW5ndGggJiYgIWlzUGVuZGluZzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdXBsb2FkaW5nRmlsZU1vZGVsID0gdGhpcy5maWxlc1VwbG9hZGluZ0xpc3RbaV07XG4gICAgICAgICAgICBpZiAoIXVwbG9hZGluZ0ZpbGVNb2RlbC5kb25lICYmICF1cGxvYWRpbmdGaWxlTW9kZWwuYWJvcnQpIHtcbiAgICAgICAgICAgICAgICBpc1BlbmRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlzQWxsQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzQWxsQ29tcGxldGVkO1xuICAgIH1cbn1cbiJdfQ==

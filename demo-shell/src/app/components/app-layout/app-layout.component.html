<adf-sidenav-layout
    [sidenavMin]="70"
    [sidenavMax]="220"
    [stepOver]="780"
    data-automation-id="sidenav-layout">

    <adf-sidenav-layout-header>
        <ng-template>
            <adf-layout-header
                id="adf-header"
                title="ADF Demo Application"
                redirectUrl="/home"
                tooltip="ADF Demo Application"
                [showSidenavToggle]="false">

                <div class="app-layout-menu-spacer"></div>

                <app-shell-user-info [menuPositionX]="'before'" [menuPositionY]="'above'"></app-shell-user-info>
                <adf-avatar
                    size="32px"
                    src="https://avatars.githubusercontent.com/u/503991?v=4&size=64"
                    initials="DV"
                    tooltip="Denys Vuika"
                    cursor="pointer"
                    [matMenuTriggerFor]="userMenu">
                </adf-avatar>
                <mat-menu #userMenu="matMenu">
                    <button mat-menu-item>Item 1</button>
                    <button mat-menu-item>Item 2</button>
                </mat-menu>
            </adf-layout-header>
        </ng-template>
    </adf-sidenav-layout-header>

    <adf-sidenav-layout-navigation>
        <ng-template>
            <mat-nav-list class="app-sidenav-linklist">
                <ng-container *ngFor="let link of links">
                    <ng-container *ngIf="link.children">
                        <mat-list-item (click)="trigger.openMenu()" [attr.data-automation-id]="link.title | translate" class="app-sidenav-link">
                            <span matLine>{{ link.title | translate }}</span>
                            <mat-icon class="app-sidenav-link__expand-button" [matMenuTriggerData]="{links: link.children}"
                                 #trigger="matMenuTrigger"
                                [matMenuTriggerFor]="nestedMenu">arrow_right</mat-icon>
                        </mat-list-item>
                    </ng-container>

                    <ng-container *ngIf="!link.children">
                        <mat-list-item [routerLink]="link.href"
                            routerLinkActive="app-sidenav-link--active" [routerLinkActiveOptions]="{ exact: true }"
                            [attr.data-automation-id]="link.title | translate" class="app-sidenav-link">
                            <span matLine>{{link.title | translate }}</span>
                        </mat-list-item>
                    </ng-container>
                </ng-container>

                <mat-list-item adf-logout [enableRedirect]="enableRedirect" redirectUri="/logout" class="app-sidenav-link" data-automation-id="Logout" >
                    <span matLine>Logout</span>
                </mat-list-item>
            </mat-nav-list>

        </ng-template>
    </adf-sidenav-layout-navigation>

    <adf-sidenav-layout-content>
        <ng-template>
            <router-outlet></router-outlet>
        </ng-template>
    </adf-sidenav-layout-content>

</adf-sidenav-layout>

<mat-menu #nestedMenu="matMenu" xPosition="after" class="nestedMenu">
    <ng-template matMenuContent let-links="links">
        <button mat-menu-item *ngFor="let link of links"
            class="app-sidenav-link"
            [attr.data-automation-id]="link.title | translate"
            routerLinkActive="app-sidenav-link--active"
            [routerLink]="link.href"
            [routerLinkActiveOptions]="{ exact: true }">

            {{ link.title | translate }}
        </button>
    </ng-template>
</mat-menu>

<adf-file-uploading-dialog #fileDialog position="left"></adf-file-uploading-dialog>

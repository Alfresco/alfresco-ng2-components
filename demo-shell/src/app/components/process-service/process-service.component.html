<mat-tab-group [(selectedIndex)]="activeTab" (selectedTabChange)="onTabChange($event)"
               data-automation-id="navigation-bar" [animationDuration]="'0'">
    <mat-tab id="app-tasks-header" label="Tasks">
        <div class="app-page-content" *ngIf="showTaskTab">
            <div class="app-grid">
                <div class="app-grid-item app-tasks-menu">
                    <div class="app-list-buttons">
                        <adf-sidebar-action-menu [expanded]="true" [width]="205" title="CREATE">
                            <mat-icon sidebar-menu-title-icon>arrow_drop_down</mat-icon>
                            <div adf-sidebar-menu-options>
                                <button mat-menu-item data-automation-id="btn-start-task" (click)="navigateStartTask()">
                                    <mat-icon>assessment</mat-icon>
                                    <span>New Task</span>
                                </button>
                            </div>
                        </adf-sidebar-action-menu>
                    </div>
                    <adf-task-filters [filterParam]="filterSelected"
                                      role="group"
                                      [appId]="appId"
                                      (filterClicked)="onTaskFilterClick($event)"
                                      (filterSelected)="onTaskFilterClick($event)"
                                      (success)="onSuccessTaskFilterList()" #activitiFilter>
                    </adf-task-filters>
                </div>
                <div
                    class="app-grid-item app-tasks-list"
                    *ngIf="taskFilter && !isStartTaskMode()">
                    <adf-tasklist
                        [appId]="taskFilter?.appId"
                        [presetColumn]="presetColumn"
                        [page]="taskPage"
                        [size]="paginationPageSize"
                        [selectionMode]="selectionMode"
                        [name]="taskFilter?.filter?.name"
                        [assignment]="taskFilter?.filter?.assignment"
                        [state]="taskFilter?.filter?.state"
                        [sort]="taskFilter?.filter?.sort"
                        [landingTaskId]="currentTaskId"
                        [showContextMenu]="taskContextMenu"
                        (showRowContextMenu)="onShowTaskRowContextMenu($event)"
                        (rowClick)="onTaskRowClick($event)"
                        (success)="onSuccessTaskList()"
                        (row-dblclick)="onTaskRowDblClick($any($event))"
                        [multiselect]="multiSelectTask"
                        #taskList>
                    </adf-tasklist>

                    <adf-pagination
                        *ngIf="taskList"
                        [target]="taskList"
                        (changePageSize)="onChangePageSize($event)"
                        #taskListPagination>
                    </adf-pagination>
                </div>
                <div
                    class="app-grid-item app-tasks-details"
                    *ngIf="!isStartTaskMode()"
                    data-automation-id="app-tasks-details">
                    <adf-task-details #activitiDetails
                                      [debugMode]="true"
                                      [taskId]="currentTaskId"
                                      [showFormTitle]="true"
                                      [fieldValidators]="fieldValidators"
                                      [showHeaderContent]="true"
                                      (formCompleted)="onFormCompleted()"
                                      (formContentClicked)="onContentClick($event)"
                                      (taskCreated)="onTaskCreated($event)"
                                      (assignTask)="onAssignTask()"
                                      (taskDeleted)="onTaskDeleted()">
                    </adf-task-details>
                    <mat-divider></mat-divider>
                    <div *ngIf="currentTaskId">
                        Task Audit log
                        <button
                            adf-task-audit
                            [task-id]="currentTaskId"
                            [download]="true"
                            mat-icon-button>
                            <mat-icon>download</mat-icon>
                        </button>
                    </div>
                    <app-task-attachments [taskId]="currentTaskId"></app-task-attachments>
                </div>
                <div class="app-grid-item app-tasks-start" *ngIf="isStartTaskMode()">
                    <adf-start-task
                        [appId]="appId"
                        [name]="defaultTaskName"
                        (success)="onStartTaskSuccess($event)"
                        (cancel)="onCancelStartTask()">
                    </adf-start-task>
                </div>
            </div>
        </div>
    </mat-tab>
    <mat-tab id="processes-header" label="Process">
        <div class="app-page-content" *ngIf="showProcessTab">
            <div class="app-grid">
                <div id="app-processes-menu" class="app-grid-item app-processes-menu">
                    <div class="app-list-buttons">
                        <adf-sidebar-action-menu [expanded]="true" [width]="205" title="CREATE">
                            <mat-icon sidebar-menu-title-icon>arrow_drop_down</mat-icon>
                            <div adf-sidebar-menu-options>
                                <button mat-menu-item data-automation-id="btn-start-process" (click)="navigateStartProcess()">
                                    <mat-icon>assessment</mat-icon>
                                    <span>New Process</span>
                                </button>
                            </div>
                        </adf-sidebar-action-menu>
                    </div>
                    <adf-process-instance-filters
                        #activitiProcessFilter
                        [appId]="appId"
                        [filterParam]="filterSelected"
                        [showIcon]="false"
                        (filterClicked)="onProcessFilterChange($event)"
                        (filterSelected)="onProcessFilterChange($event)"
                        (success)="onSuccessProcessFilterList()">
                    </adf-process-instance-filters>
                </div>
                <div
                    class="app-grid-item app-processes-list app-list"
                    *ngIf="processFilter && !isStartProcessMode()">
                    <adf-process-instance-list
                        #processList
                        *ngIf="processFilter?.filter" [appId]="processFilter?.appId"
                        [selectionMode]="selectionMode"
                        [presetColumn]="presetColumn"
                        [state]="processFilter?.filter?.state"
                        [page]="processPage"
                        [size]="paginationPageSize"
                        [sort]="processFilter?.filter?.sort"
                        [showContextMenu]="processContextMenu"
                        (showRowContextMenu)="onShowProcessRowContextMenu($event)"
                        (rowClick)="onProcessRowClick($event)"
                        (row-dblclick)="onProcessRowDblClick($any($event))"
                        [multiselect]="multiSelectProcess"
                        (success)="onSuccessProcessList()">
                    </adf-process-instance-list>
                    <adf-pagination
                        *ngIf="processList"
                        [target]="processList"
                        (changePageSize)="onChangePageSize($event)"
                        #processListPagination>
                    </adf-pagination>
                </div>
                <div class="app-grid-item app-processes-details" *ngIf="!isStartProcessMode()">
                    <adf-process-instance-details
                        #activitiProcessDetails
                        [processInstanceId]="currentProcessInstanceId"
                        (processCancelled)="processCancelled()"
                        (showProcessDiagram)="onShowProcessDiagram($event)"
                        (taskClick)="onProcessDetailsTaskClick($event)">
                    </adf-process-instance-details>

                    <div *ngIf="currentProcessInstanceId">
                        Process Audit log
                        <button adf-process-audit
                                [process-id]="currentProcessInstanceId"
                                [download]="true" mat-icon-button
                                [format]="'pdf'">
                            <mat-icon>download</mat-icon>
                        </button>
                    </div>
                    <app-process-attachments [processInstanceId]="currentProcessInstanceId">
                    </app-process-attachments>
                </div>
                <div
                    class="app-grid-item app-processes-start"
                    *ngIf="isStartProcessMode()">
                    <adf-start-process
                        #activitiStartProcess
                        [appId]="applicationId"
                        [processDefinitionName]="processDefinitionName"
                        [showSelectApplicationDropdown]="showApplications"
                        [title]="'Start Process'"
                        [name]="defaultProcessName"
                        (formContentClicked)="onContentClick($event)"
                        (start)="onStartProcessInstance($event)"
                        (cancel)="onCancelProcessInstance()"
                        (error)="onStartProcessError($event)">
                    </adf-start-process>
                </div>
            </div>
        </div>
    </mat-tab>
    <mat-tab id="settings-header" label="Settings">
        <div class="app-grid">
            <div class="app-grid-item app-settings-menu">
                <span><h3>Settings Menu</h3></span>
            </div>
            <div class="app-grid-item app-settings-details">
                <div>
                    <mat-slide-toggle id="adf-process-multiselect" [(ngModel)]="multiSelectProcess">Multiselect Process List
                    </mat-slide-toggle>
                </div>
                <div>
                    <mat-slide-toggle id="adf-task-multiselect" [(ngModel)]="multiSelectTask">Multiselect Task List
                    </mat-slide-toggle>
                </div>
                <div>
                    <mat-slide-toggle id="adf-task-context-menu" [(ngModel)]="taskContextMenu">Show Task list Context menu</mat-slide-toggle>
                </div>
                <div>
                    <mat-slide-toggle id="adf-process-context-menu" [(ngModel)]="processContextMenu">Show Process list Context menu</mat-slide-toggle>
                </div>
                <div>
                    <mat-slide-toggle id="adf-start-process-app-drop-down" [(ngModel)]="showApplications">Show Application dropdown on start process</mat-slide-toggle>
                    <mat-card class="example-card" *ngIf="showApplications">
                        <mat-card-header >
                          <mat-card-title>Filter Process definitions</mat-card-title>
                        </mat-card-header>
                        <mat-card-content class="app-filter-process-definitions-inputs">
                            <mat-form-field>
                                <mat-label>ApplicationId</mat-label>
                                <input matInput [(ngModel)]="applicationId">
                              </mat-form-field>
                              <mat-form-field>
                                <mat-label>ProcessDefinitionName</mat-label>
                                <input matInput [(ngModel)]="processDefinitionName">
                              </mat-form-field>
                        </mat-card-content>
                      </mat-card>
                </div>
                <br>
                <mat-radio-group [(ngModel)]="selectionMode">
                    <mat-radio-button value="multiple">multiple</mat-radio-button>
                    <mat-radio-button value="single">single</mat-radio-button>
                    <mat-radio-button value="none">none</mat-radio-button>
                </mat-radio-group>
            </div>
        </div>
    </mat-tab>
</mat-tab-group>

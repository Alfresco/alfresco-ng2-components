<ng-container *ngIf="!loading; else loadingTemplate">
  <adf-form *ngIf="hasFormKey(); else withoutForm"
    [taskId]="taskId"
    [showTitle]="showFormTitle"
    [showRefreshButton]="showFormRefreshButton"
    [showCompleteButton]="showFormCompleteButton"
    [disableCompleteButton]="!isCompleteButtonEnabled()"
    [showSaveButton]="isSaveButtonVisible()"
    [readOnly]="internalReadOnlyForm"
    [fieldValidators]="fieldValidators"
    (formSaved)='onFormSaved($event)'
    (formCompleted)='onFormCompleted($event)'
    (formContentClicked)='onFormContentClick($event)'
    (formLoaded)='onFormLoaded($event)'
    (error)='onFormError($event)'
    (executeOutcome)='onFormExecuteOutcome($event)' #activitiForm>
  </adf-form>
  <ng-template #withoutForm>
    <mat-card class="adf-task-form-container">
        <mat-card-header>
            <mat-card-title>
                <h4>
                    <span class="adf-form-title">
                        {{taskDetails.name}}
                        <ng-container *ngIf="!taskDetails.name">
                            {{'FORM.FORM_RENDERER.NAMELESS_TASK' | translate}}
                        </ng-container>
                    </span>
                </h4>
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <adf-empty-content
                [icon]="'description'"
                [title]="'ADF_CLOUD_TASK_FORM.EMPTY_FORM.TITLE'"
                [subtitle]="'ADF_CLOUD_TASK_FORM.EMPTY_FORM.SUBTITLE'">
            </adf-empty-content>
        </mat-card-content>
        <mat-card-actions class="adf-task-form-actions">
            <button mat-button *ngIf="!isCompletedTask()" color="primary" (click)="onCompleteTask()" id="adf-form-complete">
                {{'ADF_CLOUD_TASK_FORM.EMPTY_FORM.BUTTONS.COMPLETE' | translate}}
            </button>
        </mat-card-actions>
    </mat-card>
  </ng-template>
</ng-container>
<ng-template #loadingTemplate>
  <div fxLayout="row" fxLayoutAlign="center stretch">
      <mat-spinner></mat-spinner>
  </div>
</ng-template>
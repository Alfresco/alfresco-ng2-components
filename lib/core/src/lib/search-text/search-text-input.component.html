<div class="adf-search-container" [attr.state]="subscriptAnimationState.value">
    <div class="adf-search-container-transition"
        [@transitionMessages]="subscriptAnimationState"
        (@transitionMessages.done)="applySearchFocus($event)">
        <button mat-icon-button
                *ngIf="expandable"
                id="adf-search-button"
                class="adf-search-button"
                [ngClass]="{
                    'adf-search-button-inactive': subscriptAnimationState.value === 'inactive',
                    'adf-search-button-active': subscriptAnimationState.value === 'active'
                }"
                [title]="'SEARCH.BUTTON.TOOLTIP' | translate"
                (click)="toggleSearchBar()"
                (keyup.enter)="toggleSearchBar()">
            <mat-icon [attr.aria-label]="'SEARCH.BUTTON.ARIA-LABEL' | translate">search</mat-icon>
        </button>
        <mat-form-field class="adf-input-form-field-divider" [hintLabel]="hintLabel">
            <mat-label *ngIf='label'>{{label}}</mat-label>
            <input matInput
                   #searchInput
                   [attr.aria-label]="'SEARCH.INPUT.ARIA-LABEL' | translate"
                   [attr.type]="inputType"
                   [autocomplete]="getAutoComplete()"
                   id="adf-control-input"
                   [(ngModel)]="searchTerm"
                   [placeholder]="placeholder"
                   (focus)="activateToolbar()"
                   (blur)="onBlur($event)"
                   (keyup.escape)="toggleSearchBar()"
                   (keyup.arrowdown)="selectFirstResult($event)"
                   (ngModelChange)="inputChange($event)"
                   [searchAutocomplete]="searchAutocomplete ? searchAutocomplete : null"
                   (keyup.enter)="searchSubmit($event)">
                <button mat-icon-button
                    *ngIf="canShowClearSearch()"
                    matSuffix
                    data-automation-id="adf-clear-search-button"
                    class="adf-clear-search-button"
                    [title]="'SEARCH.FILTER.BUTTONS.CLOSE' | translate"
                    (click)="resetSearch()"
                    (keyup.enter)="resetSearch()">
                    <mat-icon>close</mat-icon>
                </button>
        </mat-form-field>
    </div>
</div>

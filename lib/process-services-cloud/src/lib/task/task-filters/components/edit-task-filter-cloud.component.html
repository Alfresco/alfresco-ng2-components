<mat-accordion *ngIf="taskFilter">
    <mat-expansion-panel (afterExpand)="onExpand($event)" (closed)="onClose($event)">
        <mat-expansion-panel-header id="adf-edit-task-filter-expansion-header">
            <mat-panel-title fxLayoutAlign="space-between center" id="adf-edit-task-filter-title-id">{{taskFilter.name | translate}}</mat-panel-title>
            <mat-panel-description fxLayoutAlign="space-between center" id="adf-edit-task-filter-sub-title-id">
                <span>{{ 'ADF_CLOUD_EDIT_TASK_FILTER.TITLE' | translate}}</span>
                <div *ngIf="toggleFilterActions" class="adf-cloud-edit-task-filter-actions">
                    <ng-container *ngIf="showFilterActions">
                        <button mat-icon-button matTooltip="{{'ADF_CLOUD_EDIT_TASK_FILTER.TOOL_TIP.SAVE' | translate}}" id="adf-save-id" [disabled]="!formHasBeenChanged" (click)="onSave()">
                            <mat-icon>save</mat-icon>
                        </button>
                        <button mat-icon-button matTooltip="{{'ADF_CLOUD_EDIT_TASK_FILTER.TOOL_TIP.SAVE_AS' | translate}}" id="adf-save-as-id" [disabled]="!formHasBeenChanged" (click)="onSaveAs()">
                            <mat-icon>unarchive</mat-icon>
                        </button>
                        <button mat-icon-button matTooltip="{{'ADF_CLOUD_EDIT_TASK_FILTER.TOOL_TIP.DELETE' | translate}}" id="adf-delete-id" (click)="onDelete()">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </ng-container>
                </div>
            </mat-panel-description>
        </mat-expansion-panel-header>
        <form [formGroup]="editTaskFilterForm">
            <div fxLayout="column">
                <div>
                <ng-container *ngFor="let taskFilterProperty of taskFilterProperties">
                    <mat-form-field *ngIf="isSelectType(taskFilterProperty)">
                        <mat-select
                            placeholder="{{taskFilterProperty.label | translate}}"
                            [formControlName]="taskFilterProperty.key"
                            id="adf-task-filter-state-id">
                            <mat-option *ngFor="let state of taskFilterProperty.options$ | async" [value]="state.value">
                                {{ state.label }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="isTextType(taskFilterProperty)">
                        <input matInput
                        [formControlName]="taskFilterProperty.key"
                        type="text"
                        id="adf-task-filter-appname-id"
                        placeholder="{{taskFilterProperty.label | translate}}"/>
                    </mat-form-field>
                    <mat-form-field *ngIf="isDateType(taskFilterProperty)">
                        <mat-label>{{taskFilterProperty.label | translate}}</mat-label>
                            <input matInput [matDatepicker]="dateController" placeholder="Choose a date"
                                [formControlName]="taskFilterProperty.key" data-automation-id="due after">
                        <mat-datepicker-toggle matSuffix [for]="dateController"></mat-datepicker-toggle>
                        <mat-datepicker #dateController></mat-datepicker>
                    </mat-form-field>
                </ng-container>
            </div>
            </div>
        </form>
    </mat-expansion-panel>
</mat-accordion>
